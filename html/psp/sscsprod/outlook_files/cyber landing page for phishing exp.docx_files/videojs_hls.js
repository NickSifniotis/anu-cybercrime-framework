!function(t,e,i,s){"use strict";var a,r,n,o=1.1,h=500;r=function(t){return t.retries&&t.retries>=2},e.Hls=e.Flash.extend({init:function(t,i,s){var a=i.source,r=t.options();t.hls=this,delete i.source,i.swf=r.flash.swf,e.Flash.call(this,t,i,s),i.source=a,this.bytesReceived=0,this.currentTime=e.Hls.prototype.currentTime,this.setCurrentTime=e.Hls.prototype.setCurrentTime,this.segmentBuffer_=[],this.startCheckingBuffer_(),e.Hls.prototype.src.call(this,i.source&&i.source.src)}}),e.options.techOrder.unshift("hls"),e.Hls.GOAL_BUFFER_LENGTH=30,e.Hls.prototype.src=function(t){var i,r,n,o=this,h=this.player(),l=h.options().hls||{};t&&(this.src_&&this.resetSrc_(),this.src_=t,i=new e.MediaSource,n={src:e.URL.createObjectURL(i),type:"video/flv"},this.mediaSource=i,this.segmentBuffer_=[],this.segmentParser_=new e.Hls.SegmentParser,this.setupMetadataCueTranslation_(),this.mediaSource.addEventListener("sourceopen",e.bind(this,this.handleSourceOpen)),this.playlists&&this.playlists.dispose(),this.mediaIndex=0,this.playlists=new e.Hls.PlaylistLoader(this.src_,l.withCredentials),this.playlists.on("loadedmetadata",e.bind(this,function(){var t,i,a,n,o,l,u,d;u=function(){this.fillBuffer(),h.trigger("loadedmetadata")},r=this.playlists.media(),this.bandwidth===s&&this.setBandwidth({bandwidth:5*this.playlists.bandwidth}),t=this.selectPlaylist(),a=r.attributes&&r.attributes.BANDWIDTH||0,n=t.attributes&&t.attributes.BANDWIDTH||0,o=r.segments&&r.segments[this.mediaIndex].duration||r.targetDuration,l=o*n/this.bandwidth,l||(l=1/0),d=10,n>a&&d>=l?(this.playlists.media(t),i=e.bind(this,function(){u.call(this),this.playlists.off("loadedplaylist",i)}),this.playlists.on("loadedplaylist",i)):u.call(this)})),this.playlists.on("error",e.bind(this,function(){h.error(this.playlists.error)})),this.playlists.on("loadedplaylist",e.bind(this,function(){var t=this.playlists.media();t&&(this.updateDuration(this.playlists.media()),this.mediaIndex=e.Hls.translateMediaIndex(this.mediaIndex,r,t),r=t,this.fetchKeys_())})),this.playlists.on("mediachange",e.bind(this,function(){a&&this.cancelKeyXhr(),h.trigger("mediachange")})),this.player().ready(function(){o.el()&&o.el().vjs_src(n.src)}))},e.Hls.getMediaIndexForLive_=function(t){if(!t.segments)return 0;for(var e=t.segments.length,i=0,s=3*(t.targetDuration||10);s>i&&e>0;)i+=t.segments[e-1].duration,e--;return e},e.Hls.prototype.handleSourceOpen=function(){var t=this.player(),e=this.mediaSource.addSourceBuffer('video/flv; codecs="vp6,aac"');this.sourceBuffer=e,t.options().autoplay&&t.play(),e.appendBuffer(this.segmentParser_.getFlvHeader())},e.Hls.prototype.setupMetadataCueTranslation_=function(){var t,i=this,s=i.segmentParser_.metadataStream;i.player().addTextTrack&&(s.on("data",function(a){var r,n;if(!t)for(t=i.player().addTextTrack("metadata","Timed Metadata"),t.inBandMetadataTrackDispatchType=e.Hls.SegmentParser.STREAM_TYPES.metadata.toString(16).toUpperCase(),r=0;r<s.descriptor.length;r++)n=("00"+s.descriptor[r].toString(16).toUpperCase()).slice(-2),t.inBandMetadataTrackDispatchType+=n;i.segmentBuffer_[0].pendingMetadata.push({textTrack:t,metadata:a})}),i.on(i.player(),"seeking",function(){var s,a,r;if(t)for(s=i.playlists.media(),a=i.playlists.expiredPreDiscontinuity_+i.playlists.expiredPostDiscontinuity_,a+=e.Hls.Playlist.duration(s,s.mediaSequence,s.mediaSequence+i.mediaIndex),r=t.cues.length;r--;)t.cues[r].startTime>=a&&t.removeCue(t.cues[r])}))},e.Hls.prototype.addCuesForMetadata_=function(i){var s,a,r,n,o,h,l,u,d;for(l=e.Hls.Playlist.duration(i.playlist,i.playlist.mediaSequence,i.playlist.mediaSequence+i.mediaIndex),h=i.playlist.segments[i.mediaIndex],o=Math.min(h.minVideoPts,h.minAudioPts);i.pendingMetadata.length;){for(n=i.pendingMetadata[0].metadata,u=i.pendingMetadata[0].textTrack,s=0;s<n.frames.length;s++)r=n.frames[s],d=l+.001*(n.pts-o),a=new t.VTTCue(d,d,r.value||r.url||""),a.frame=r,u.addCue(a);i.pendingMetadata.shift()}},e.Hls.prototype.play=function(){return this.ended()&&(this.mediaIndex=0),this.duration()===1/0&&(!this.player().hasClass("vjs-has-started")||this.currentTime()>this.seekable().end(0)?this.setCurrentTime(this.seekable().end(0)):this.currentTime()<this.seekable().start(0)&&this.setCurrentTime(this.seekable().start(0))),e.Flash.prototype.play.apply(this,arguments)},e.Hls.prototype.currentTime=function(){return this.lastSeekedTime_?this.lastSeekedTime_:this.el()&&this.el().vjs_getProperty?this.el().vjs_getProperty("currentTime"):0},e.Hls.prototype.setCurrentTime=function(t){return this.playlists&&this.playlists.media()&&this.playlists.media().segments?(t<this.seekable().start(0)?t=this.seekable().start(0):t>this.seekable().end(0)&&(t=this.seekable().end(0)),this.lastSeekedTime_=t,this.mediaIndex=this.playlists.getMediaIndexForTime_(t),this.sourceBuffer.abort(),this.cancelSegmentXhr(),a&&(a.aborted=!0,this.cancelKeyXhr()),this.segmentBuffer_=[],void this.fillBuffer(1e3*t)):0},e.Hls.prototype.duration=function(){var t=this.playlists;return t?e.Hls.Playlist.duration(t.media()):0},e.Hls.prototype.seekable=function(){var t,i,s;return this.playlists&&(s=this.playlists.media())?(t=e.Hls.Playlist.seekable(s),i=this.playlists.expiredPostDiscontinuity_-this.playlists.expiredPreDiscontinuity_,e.createTimeRange(i,i+(t.end(0)-t.start(0)))):e.createTimeRange()},e.Hls.prototype.updateDuration=function(t){var i=this.player(),s=i.duration(),a=e.Hls.Playlist.duration(t);s!==a&&i.trigger("durationchange")},e.Hls.prototype.resetSrc_=function(){this.cancelSegmentXhr(),this.cancelKeyXhr(),this.sourceBuffer&&this.sourceBuffer.abort()},e.Hls.prototype.cancelKeyXhr=function(){a&&(a.onreadystatechange=null,a.abort(),a=null)},e.Hls.prototype.cancelSegmentXhr=function(){this.segmentXhr_&&(this.segmentXhr_.onreadystatechange=null,this.segmentXhr_.abort(),this.segmentXhr_=null)},e.Hls.prototype.dispose=function(){this.stopCheckingBuffer_(),this.playlists&&this.playlists.dispose(),this.resetSrc_(),e.Flash.prototype.dispose.call(this)},e.Hls.prototype.selectPlaylist=function(){var t,i,s,a,r,n,h,l,u=this.player(),d=this.playlists.master.playlists.slice(),p=[],g=d.length;for(d.sort(e.Hls.comparePlaylistBandwidth);g--;)i=d[g],i.attributes&&i.attributes.BANDWIDTH&&(t=i.attributes.BANDWIDTH*o,t<u.hls.bandwidth&&(p.push(i),a||(a=i)));for(g=p.length,p.sort(e.Hls.comparePlaylistResolution),i=null,h=parseInt(getComputedStyle(u.el()).width,10),l=parseInt(getComputedStyle(u.el()).height,10);g--;)if(s=i,i=p[g],i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&i.attributes.RESOLUTION.height){if(i.attributes.RESOLUTION.width===h&&i.attributes.RESOLUTION.height===l){r=null,n=i;break}if(i.attributes.RESOLUTION.width<h&&i.attributes.RESOLUTION.height<l){s&&s.attributes&&s.attributes.RESOLUTION&&s.attributes.RESOLUTION.width&&s.attributes.RESOLUTION.height&&(r=s),n=i;break}}return r||n||a||d[0]},e.Hls.prototype.checkBuffer_=function(){this.checkBufferTimeout_&&(t.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null),this.fillBuffer(),this.drainBuffer(),this.checkBufferTimeout_=t.setTimeout(e.bind(this,this.checkBuffer_),h)},e.Hls.prototype.startCheckingBuffer_=function(){this.player().on("waiting",e.bind(this,this.drainBuffer)),this.checkBuffer_()},e.Hls.prototype.stopCheckingBuffer_=function(){t.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null,this.player().off("waiting",this.drainBuffer)},e.Hls.prototype.fillBuffer=function(t){var i,a,r=this.player(),n=r.buffered(),o=0;(r.hasClass("vjs-has-started")||"none"!==r.options().preload)&&r.currentSrc()&&this.playlists&&(this.segmentXhr_||"HAVE_NOTHING"!==this.playlists.state&&this.playlists.media()&&this.playlists.media().segments&&(this.playlists.media().endList||this.player().hasClass("vjs-has-started")||t!==s)&&"SWITCHING_MEDIA"!==this.playlists.state&&(i=this.playlists.media().segments[this.mediaIndex],i&&(n&&(o=r.buffered().end(0)-r.currentTime()),"number"!=typeof t&&o>=e.Hls.GOAL_BUFFER_LENGTH||(a=this.playlistUriToUrl(i.uri),this.loadSegment(a,t)))))},e.Hls.prototype.playlistUriToUrl=function(t){var e;return e=this.playlists.media().uri===this.src_?n(this.src_,t):n(n(this.src_,this.playlists.media().uri||""),t)},e.Hls.prototype.setBandwidth=function(t){var e=this;e.segmentXhrTime=t.roundTripTime,e.bandwidth=t.bandwidth,e.bytesReceived+=t.bytesReceived||0,e.trigger("bandwidthupdate")},e.Hls.prototype.loadSegment=function(t,i){var s=this,a=this.player(),r=a.options().hls||{};this.segmentXhr_=e.Hls.xhr({url:t,responseType:"arraybuffer",withCredentials:r.withCredentials},function(t,e){var r;return s.segmentXhr_=null,t?"timeout"===t?(s.bandwidth=1,s.playlists.media(s.selectPlaylist())):(s.error={status:this.status,message:"HLS segment request error at URL: "+e,code:this.status>=500?4:2},415==this.status?s.trigger("error"):(s.mediaIndex++,void(s.mediaIndex>=s.playlists.media().segments.length&&s.mediaSource.endOfStream()))):void(this.response&&(s.setBandwidth(this),r={mediaIndex:s.mediaIndex,playlist:s.playlists.media(),offset:i,bytes:null,encryptedBytes:null,decrypter:null,pendingMetadata:[]},r.playlist.segments[r.mediaIndex].key?r.encryptedBytes=new Uint8Array(this.response):r.bytes=new Uint8Array(this.response),s.segmentBuffer_.push(r),a.trigger("progress"),s.drainBuffer(),s.mediaIndex++,s.playlists.media(s.selectPlaylist())))})},e.Hls.prototype.drainBuffer=function(t){var i,s,a,n,o,h,l,u,d,p,g=0,c=0,m=this.segmentBuffer_;if(m.length&&this.sourceBuffer&&!this.sourceBuffer.updating){if(i=m[0],s=i.mediaIndex,a=i.playlist,n=i.offset,h=i.bytes,l=a.segments[s],l.key&&!h)return r(l.key)?m.shift():l.key.bytes?i.decrypter?void 0:(d=l.key.iv||new Uint32Array([0,0,0,s+a.mediaSequence]),u=new e.Hls.Decrypter(i.encryptedBytes,l.key.bytes,d,function(t,e){i.bytes=e}),void(i.decrypter=u)):this.fetchKeys_();for(t=t||{},this.segmentParser_.parseSegmentBinaryData(h),this.segmentParser_.flushTags(),o=[],this.segmentParser_.tagsAvailable()&&(this.segmentParser_.stats.h264Tags()&&(l.minVideoPts=this.segmentParser_.stats.minVideoPts(),l.maxVideoPts=this.segmentParser_.stats.maxVideoPts()),this.segmentParser_.stats.aacTags()&&(l.minAudioPts=this.segmentParser_.stats.minAudioPts(),l.maxAudioPts=this.segmentParser_.stats.maxAudioPts()));this.segmentParser_.tagsAvailable();)o.push(this.segmentParser_.getNextTag());if(this.addCuesForMetadata_(i),this.updateDuration(this.playlists.media()),"number"==typeof n){for(c=this.playlists.expiredPostDiscontinuity_+this.playlists.expiredPreDiscontinuity_,c+=e.Hls.Playlist.duration(a,a.mediaSequence,a.mediaSequence+s),c=n-1e3*c,p=c+o[0].pts;o[g+1]&&o[g].pts<p;)g++;this.el().vjs_setProperty("currentTime",.001*(o[g].pts-p+n)),o=o.slice(g),this.lastSeekedTime_=null}l.discontinuity&&o.length&&this.el().vjs_discontinuity(),function(){var t,e,i=0;for(g=0;g<o.length;g++)i+=o[g].bytes.byteLength;for(e=new Uint8Array(i),g=0,t=0;g<o.length;g++)e.set(o[g].bytes,t),t+=o[g].bytes.byteLength;this.sourceBuffer.appendBuffer(e)}.call(this),m.shift(),this.duration()!==1/0&&s+1===a.segments.length&&this.mediaSource.endOfStream()}},e.Hls.prototype.fetchKeys_=function(){var t,i,s,n,o,h,l,u;if(!a&&this.segmentBuffer_.length)for(s=this,n=this.player(),o=n.options().hls||{},u=function(t){return function(e){return a=null,e||!this.response||16!==this.response.byteLength?(t.retries=t.retries||0,t.retries++,void(this.aborted||s.fetchKeys_())):(l=new DataView(this.response),t.bytes=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]),void s.checkBuffer_())}},t=0;t<s.segmentBuffer_.length;t++)if(h=s.segmentBuffer_[t].playlist.segments[s.segmentBuffer_[t].mediaIndex],i=h.key,i&&!i.bytes&&!r(i)){a=e.Hls.xhr({url:this.playlistUriToUrl(i.uri),responseType:"arraybuffer",withCredentials:o.withCredentials},u(i));break}},e.Hls.supportsNativeHls=function(){var t,s,a=i.createElement("video");return e.Html5.isSupported()?(t=a.canPlayType("application/x-mpegURL"),s=a.canPlayType("application/vnd.apple.mpegURL"),/probably|maybe/.test(t)||/probably|maybe/.test(s)):!1}(),e.Hls.isSupported=function(){return!e.Hls.supportsNativeHls&&e.Flash.isSupported()&&e.MediaSource&&t.Uint8Array},e.Hls.canPlaySource=function(t){var e=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return e.test(t.type)},e.Hls.getPlaylistDuration=function(t,i,s){return e.log.warn("videojs.Hls.getPlaylistDuration is deprecated. Use videojs.Hls.Playlist.duration instead"),e.Hls.Playlist.duration(t,i,s)},e.Hls.getPlaylistTotalDuration=function(t){return e.log.warn("videojs.Hls.getPlaylistTotalDuration is deprecated. Use videojs.Hls.Playlist.duration instead"),e.Hls.Playlist.duration(t)},e.Hls.translateMediaIndex=function(t,i,s){var a;return 0===t?0:s&&s.segments?(a=t+(i.mediaSequence-s.mediaSequence),a>s.segments.length||0>a?e.Hls.getMediaIndexForLive_(s)+1:a):0},e.Hls.getMediaIndexByTime=function(){return e.log.warn("getMediaIndexByTime is deprecated. Use PlaylistLoader.getMediaIndexForTime_ instead."),0},e.Hls.comparePlaylistBandwidth=function(e,i){var s,a;return e.attributes&&e.attributes.BANDWIDTH&&(s=e.attributes.BANDWIDTH),s=s||t.Number.MAX_VALUE,i.attributes&&i.attributes.BANDWIDTH&&(a=i.attributes.BANDWIDTH),a=a||t.Number.MAX_VALUE,s-a},e.Hls.comparePlaylistResolution=function(e,i){var s,a;return e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(s=e.attributes.RESOLUTION.width),s=s||t.Number.MAX_VALUE,i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(a=i.attributes.RESOLUTION.width),a=a||t.Number.MAX_VALUE,s===a&&e.attributes.BANDWIDTH&&i.attributes.BANDWIDTH?e.attributes.BANDWIDTH-i.attributes.BANDWIDTH:s-a},n=e.Hls.resolveUrl=function(t,e){var s,a,r=i.querySelector("base"),n=i.querySelector("head"),o=i.createElement("a"),h=r;return r?s=r.href:h=n.appendChild(i.createElement("base")),h.href=t,o.href=e,a=o.href,r?r.href=s:n.removeChild(h),a}}(window,window.videojs,document),function(t,e){var i=function(){this.init=function(){var t={};this.on=function(e,i){t[e]||(t[e]=[]),t[e].push(i)},this.off=function(e,i){var s;return t[e]?(s=t[e].indexOf(i),t[e].splice(s,1),s>-1):!1},this.trigger=function(e){var i,s,a,r;if(i=t[e])for(r=Array.prototype.slice.call(arguments,1),a=i.length,s=0;a>s;++s)i[s].apply(this,r)},this.dispose=function(){t={}}}};i.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},t.Hls.Stream=i}(window.videojs),function(t){t.videojs=t.videojs||{},t.videojs.Hls=t.videojs.Hls||{};var e=t.videojs.Hls;e.FlvTag=function(t,i){var s,a=0,r=function(t,e){var i,s=t.position+e;s<t.bytes.byteLength||(i=new Uint8Array(2*s),i.set(t.bytes.subarray(0,t.position),0),t.bytes=i,t.view=new DataView(t.bytes.buffer))},n=e.FlvTag.widthBytes||new Uint8Array("width".length),o=e.FlvTag.heightBytes||new Uint8Array("height".length),h=e.FlvTag.videocodecidBytes||new Uint8Array("videocodecid".length);if(!e.FlvTag.widthBytes){for(s=0;s<"width".length;s++)n[s]="width".charCodeAt(s);for(s=0;s<"height".length;s++)o[s]="height".charCodeAt(s);for(s=0;s<"videocodecid".length;s++)h[s]="videocodecid".charCodeAt(s);e.FlvTag.widthBytes=n,e.FlvTag.heightBytes=o,e.FlvTag.videocodecidBytes=h}switch(this.keyFrame=!1,t){case e.FlvTag.VIDEO_TAG:this.length=16;break;case e.FlvTag.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case e.FlvTag.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw"Error Unknown TagType"}this.bytes=new Uint8Array(16384),this.view=new DataView(this.bytes.buffer),this.bytes[0]=t,this.position=this.length,this.keyFrame=i,this.pts=0,this.dts=0,this.writeBytes=function(t,e,i){var s,a=e||0;i=i||t.byteLength,s=a+i,r(this,i),this.bytes.set(t.subarray(a,s),this.position),this.position+=i,this.length=Math.max(this.length,this.position)},this.writeByte=function(t){r(this,1),this.bytes[this.position]=t,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(t){r(this,2),this.view.setUint16(this.position,t),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(t){return this.bytes[this.length-t]},this.nalUnitSize=function(){return 0===a?0:this.length-(a+4)},this.startNalUnit=function(){if(a>0)throw new Error("Attempted to create new NAL wihout closing the old one");a=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(t){var e,i;this.length===a+4?this.length-=4:a>0&&(e=a+4,i=this.length-e,this.position=a,this.view.setUint32(this.position,i),this.position=this.length,t&&t.push(this.bytes.subarray(e,e+i))),a=0},this.writeMetaDataDouble=function(t,e){var i;if(r(this,2+t.length+9),this.view.setUint16(this.position,t.length),this.position+=2,"width"===t)this.bytes.set(n,this.position),this.position+=5;else if("height"===t)this.bytes.set(o,this.position),this.position+=6;else if("videocodecid"===t)this.bytes.set(h,this.position),this.position+=12;else for(i=0;i<t.length;i++)this.bytes[this.position]=t.charCodeAt(i),this.position++;this.position++,this.view.setFloat64(this.position,e),this.position+=8,this.length=Math.max(this.length,this.position),++a},this.writeMetaDataBoolean=function(t,e){var i;for(r(this,2),this.view.setUint16(this.position,t.length),this.position+=2,i=0;i<t.length;i++)console.assert(t.charCodeAt(i)<255),r(this,1),this.bytes[this.position]=t.charCodeAt(i),this.position++;r(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,e?1:0),this.position++,this.length=Math.max(this.length,this.position),++a},this.finalize=function(){var t,s;switch(this.bytes[0]){case e.FlvTag.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||i?16:32),this.bytes[12]=i?0:1,t=this.pts-this.dts,this.bytes[13]=(16711680&t)>>>16,this.bytes[14]=(65280&t)>>>8,this.bytes[15]=(255&t)>>>0;break;case e.FlvTag.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=i?0:1;break;case e.FlvTag.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,a),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return s=this.length-11,this.bytes[1]=(16711680&s)>>>16,this.bytes[2]=(65280&s)>>>8,this.bytes[3]=(255&s)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,r(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=e.FlvTag.frameTime(this.bytes),console.assert(this.bytes.byteLength===this.length),this}},e.FlvTag.AUDIO_TAG=8,e.FlvTag.VIDEO_TAG=9,e.FlvTag.METADATA_TAG=18,e.FlvTag.isAudioFrame=function(t){return e.FlvTag.AUDIO_TAG===t[0]},e.FlvTag.isVideoFrame=function(t){return e.FlvTag.VIDEO_TAG===t[0]},e.FlvTag.isMetaData=function(t){return e.FlvTag.METADATA_TAG===t[0]},e.FlvTag.isKeyFrame=function(t){return e.FlvTag.isVideoFrame(t)?23===t[11]:e.FlvTag.isAudioFrame(t)?!0:!!e.FlvTag.isMetaData(t)},e.FlvTag.frameTime=function(t){var e=t[4]<<16;return e|=t[5]<<8,e|=t[6]<<0,e|=t[7]<<24}}(this),function(t){t.videojs.Hls.ExpGolomb=function(t){var e=t.byteLength,i=0,s=0;this.length=function(){return 8*e},this.bitsAvailable=function(){return 8*e+s},this.loadWord=function(){var a=t.byteLength-e,r=new Uint8Array(4),n=Math.min(4,e);if(0===n)throw new Error("no bytes available");r.set(t.subarray(a,a+n)),i=new DataView(r.buffer).getUint32(0),s=8*n,e-=n},this.skipBits=function(t){var a;s>t?(i<<=t,s-=t):(t-=s,a=t/8,t-=8*a,e-=a,this.loadWord(),i<<=t,s-=t)},this.readBits=function(t){var a=Math.min(s,t),r=i>>>32-a;return console.assert(32>t,"Cannot read more than 32 bits at a time"),s-=a,s>0?i<<=a:e>0&&this.loadWord(),a=t-a,a>0?r<<a|this.readBits(a):r},this.skipLeadingZeros=function(){var t;for(t=0;s>t;++t)if(0!==(i&2147483648>>>t))return i<<=t,s-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()}}(this),function(){var t,e=window.videojs.Hls.ExpGolomb,i=window.videojs.Hls.FlvTag;window.videojs.Hls.H264ExtraData=t=function(){this.sps=[],this.pps=[]},t.prototype.extraDataExists=function(){return this.sps.length>0},t.prototype.scaling_list=function(t,e){var i,s,a=8,r=8;for(i=0;t>i;++i)0!==r&&(s=e.readExpGolomb(),r=(a+s+256)%256),a=0===r?a:r},t.prototype.getSps0Rbsp=function(){for(var t=this.sps[0],e=1,i=1,s=0,a=t.byteLength-2,r=new Uint8Array(t.byteLength);a>e;)0===t[e]&&0===t[e+1]&&3===t[e+2]&&(r.set(t.subarray(i,e+1),s),s+=e+1-i,i=e+3),e++;return r.set(t.subarray(i),s),r.subarray(0,s+(t.byteLength-i))},t.prototype.metaDataTag=function(t){var s,a,r,n,o,h,l,u,d,p,g,c,m,f=new i(i.METADATA_TAG),y=0,b=0,T=0,_=0;if(f.dts=t,f.pts=t,s=new e(this.getSps0Rbsp()),a=s.readUnsignedByte(),s.skipBits(16),s.skipUnsignedExpGolomb(),(100===a||110===a||122===a||244===a||44===a||83===a||86===a||118===a||128===a)&&(r=s.readUnsignedExpGolomb(),3===r&&s.skipBits(1),s.skipUnsignedExpGolomb(),s.skipUnsignedExpGolomb(),s.skipBits(1),s.readBoolean()))for(n=3!==r?8:12,o=0;n>o;++o)s.readBoolean()&&(6>o?this.scaling_list(16,s):this.scaling_list(64,s));if(s.skipUnsignedExpGolomb(),h=s.readUnsignedExpGolomb(),0===h)s.readUnsignedExpGolomb();else if(1===h)for(s.skipBits(1),s.skipExpGolomb(),s.skipExpGolomb(),l=s.readUnsignedExpGolomb(),o=0;l>o;++o)s.skipExpGolomb();return s.skipUnsignedExpGolomb(),s.skipBits(1),u=s.readUnsignedExpGolomb(),d=s.readUnsignedExpGolomb(),p=s.readBits(1),0===p&&s.skipBits(1),s.skipBits(1),g=s.readBoolean(),g&&(y=s.readUnsignedExpGolomb(),b=s.readUnsignedExpGolomb(),T=s.readUnsignedExpGolomb(),_=s.readUnsignedExpGolomb()),c=16*(u+1)-2*y-2*b,m=(2-p)*(d+1)*16-2*T-2*_,f.writeMetaDataDouble("videocodecid",7),f.writeMetaDataDouble("width",c),f.writeMetaDataDouble("height",m),f},t.prototype.extraDataTag=function(t){var e,s=new i(i.VIDEO_TAG,!0);for(s.dts=t,s.pts=t,s.writeByte(1),s.writeByte(this.sps[0][1]),s.writeByte(this.sps[0][2]),s.writeByte(this.sps[0][3]),s.writeByte(255),s.writeByte(225),s.writeShort(this.sps[0].length),s.writeBytes(this.sps[0]),s.writeByte(this.pps.length),e=0;e<this.pps.length;++e)s.writeShort(this.pps[e].length),s.writeBytes(this.pps[e]);return s}}(),function(t){var e,i,s=t.videojs.Hls.FlvTag,a=t.videojs.Hls.H264ExtraData;t.videojs.Hls.NALUnitType=i={unspecified:0,slice_layer_without_partitioning_rbsp_non_idr:1,slice_data_partition_a_layer_rbsp:2,slice_data_partition_b_layer_rbsp:3,slice_data_partition_c_layer_rbsp:4,slice_layer_without_partitioning_rbsp_idr:5,sei_rbsp:6,seq_parameter_set_rbsp:7,pic_parameter_set_rbsp:8,access_unit_delimiter_rbsp:9,end_of_seq_rbsp:10,end_of_stream_rbsp:11},t.videojs.Hls.H264Stream=e=function(){this._next_pts=0,this._next_dts=0,this._h264Frame=null,this._oldExtraData=new a,this._newExtraData=new a,this._nalUnitType=-1,this._state=0,this.tags=[]},e.prototype.setTimeStampOffset=function(){},e.prototype.setNextTimeStamp=function(t,e,i){this._next_pts=t,this._next_dts=e,i&&this.finishFrame()},e.prototype.finishFrame=function(){this._h264Frame&&(this._newExtraData.extraDataExists()&&(this._oldExtraData=this._newExtraData,this._newExtraData=new a),this._oldExtraData.extraDataExists()&&(this._h264Frame.keyFrame||0===this.tags.length)&&(this.tags.push(this._oldExtraData.metaDataTag(this._h264Frame.pts)),this.tags.push(this._oldExtraData.extraDataTag(this._h264Frame.pts))),this._h264Frame.endNalUnit(),this.tags.push(this._h264Frame)),this._h264Frame=null,this._nalUnitType=-1,this._state=0},e.prototype.writeBytes=function(t,e,a){var r,n,o,h;if(e=e||0,a=a||0,!(0>=a))switch(this._state){default:case 0:this._state=1;case 1:if(t[e]<=1&&(r=this._h264Frame?this._h264Frame.nalUnitSize():0,r>=1&&0===this._h264Frame.negIndex(1))){if(1===t[e]&&r>=2&&0===this._h264Frame.negIndex(2))return r>=3&&0===this._h264Frame.negIndex(3)?this._h264Frame.length-=3:this._h264Frame.length-=2,this._state=3,this.writeBytes(t,e+1,a-1);if(a>1&&0===t[e]&&1===t[e+1])return r>=2&&0===this._h264Frame.negIndex(2)?this._h264Frame.length-=2:this._h264Frame.length-=1,this._state=3,this.writeBytes(t,e+2,a-2);if(a>2&&0===t[e]&&0===t[e+1]&&1===t[e+2])return this._state=3,this.writeBytes(t,e+3,a-3)}this._state=2;case 2:for(n=e,o=n+a,h=o-3;h>e;)if(t[e+2]>1)e+=3;else if(0!==t[e+1])e+=2;else if(0!==t[e])e+=1;else{if(1===t[e+2])return e>n&&this._h264Frame.writeBytes(t,n,e-n),this._state=3,e+=3,this.writeBytes(t,e,o-e);if(o-e>=4&&0===t[e+2]&&1===t[e+3])return e>n&&this._h264Frame.writeBytes(t,n,e-n),this._state=3,e+=4,this.writeBytes(t,e,o-e);e+=3}return this._state=1,void(this._h264Frame&&this._h264Frame.writeBytes(t,n,a));case 3:if(this._h264Frame)switch(this._nalUnitType){case i.seq_parameter_set_rbsp:this._h264Frame.endNalUnit(this._newExtraData.sps);break;case i.pic_parameter_set_rbsp:this._h264Frame.endNalUnit(this._newExtraData.pps);break;case i.slice_layer_without_partitioning_rbsp_idr:this._h264Frame.endNalUnit();break;default:this._h264Frame.endNalUnit()}return this._nalUnitType=31&t[e],this._h264Frame&&(this._nalUnitType===i.access_unit_delimiter_rbsp?this.finishFrame():this._nalUnitType===i.slice_layer_without_partitioning_rbsp_idr&&(this._h264Frame.keyFrame=!0)),this._h264Frame||(this._h264Frame=new s(s.VIDEO_TAG),this._h264Frame.pts=this._next_pts,this._h264Frame.dts=this._next_dts),this._h264Frame.startNalUnit(),this._state=2,this.writeBytes(t,e,a)}}}(this),function(t){var e=t.videojs.Hls.FlvTag,i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3];t.videojs.Hls.AacStream=function(){var t,s,a,r,n,o,h,l,u,d,p,g,c;this.tags=[],this.setTimeStampOffset=function(t){r=t-1e3},this.setNextTimeStamp=function(e,i,r){t=e,a=i,r&&(s=0)},this.writeBytes=function(m,f,y){var b,T,_;for(f=f||0,y=y||0,y=y>a?a:y,a-=y,b=f+y;b>f;)switch(s){default:s=0;break;case 0:if(f>=b)return;if(255!==m[f])return console.assert(!1,"Error no ATDS header found"),f+=1,void(s=0);f+=1,s=1;break;case 1:if(f>=b)return;if(240!==(240&m[f]))return console.assert(!1,"Error no ATDS header found"),f+=1,void(s=0);n=!!(1&m[f]),f+=1,s=2;break;case 2:if(f>=b)return;o=((192&m[f])>>>6)+1,h=(60&m[f])>>>2,l=(1&m[f])<<2,f+=1,s=3;break;case 3:if(f>=b)return;l|=(192&m[f])>>>6,u=(3&m[f])<<11,f+=1,s=4;break;case 4:if(f>=b)return;u|=m[f]<<3,f+=1,s=5;break;case 5:if(f>=b)return;u|=(224&m[f])>>>5,u-=n?7:9,f+=1,s=6;break;case 6:if(f>=b)return;d=1024*((3&m[f])+1),p=1e3*d/i[h],T=o<<11|h<<7|l<<3,(T!==c||t-r>=1e3)&&(g=new e(e.METADATA_TAG),g.pts=t,g.dts=t,g.writeMetaDataDouble("audiocodecid",10),g.writeMetaDataBoolean("stereo",2===l),g.writeMetaDataDouble("audiosamplerate",i[h]),g.writeMetaDataDouble("audiosamplesize",16),this.tags.push(g),c=T,g=new e(e.AUDIO_TAG,!0),g.pts=t,g.dts=g.pts,g.view.setUint16(g.position,T),g.position+=2,g.length=Math.max(g.length,g.position),this.tags.push(g),r=t),f+=1,s=7;break;case 7:if(!n){if(2>b-f)return;f+=2}g=new e(e.AUDIO_TAG),g.pts=t,g.dts=t,s=8;break;case 8:for(;u;){if(f>=b)return;_=u>b-f?b-f:u,g.writeBytes(m,f,_),f+=_,u-=_}this.tags.push(g),s=0,t+=p}}}}(this),function(t,e,i){"use strict";var s,a=function(t,e,i){var s,a="";for(s=e;i>s;s++)a+="%"+("00"+t[s].toString(16)).slice(-2);return a},r=function(e,i,s){return t.decodeURIComponent(a(e,i,s))},n=function(e,i,s){return t.unescape(a(e,i,s))},o={TXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=r(t.data,1,e),t.value=r(t.data,e+1,t.data.length-1);break}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=r(t.data,1,e),t.url=r(t.data,e+1,t.data.length);break}},PRIV:function(t){var e;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=n(t.data,0,e);break}t.privateData=t.data.subarray(e+1)}};s=function(t){var i,a={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},r=0,n=[],h=0;if(s.prototype.init.call(this),this.dispatchType=e.Hls.SegmentParser.STREAM_TYPES.metadata.toString(16),a.descriptor)for(i=0;i<a.descriptor.length;i++)this.dispatchType+=("00"+a.descriptor[i].toString(16)).slice(-2);this.push=function(t){var i,s,l,u,d;if(0===n.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))return void(a.debug&&e.log("Skipping unrecognized metadata packet"));if(n.push(t),h+=t.data.byteLength,1===n.length&&(r=t.data[6]<<21|t.data[7]<<14|t.data[8]<<7|t.data[9],r+=10),!(r>h)){for(i={data:new Uint8Array(r),frames:[],pts:n[0].pts,dts:n[0].dts},d=0;r>d;)i.data.set(n[0].data,d),d+=n[0].data.byteLength,h-=n[0].data.byteLength,n.shift();s=10,64&i.data[5]&&(s+=4,s+=i.data[10]<<24|i.data[11]<<16|i.data[12]<<8|i.data[13],r-=i.data[16]<<24|i.data[17]<<16|i.data[18]<<8|i.data[19]);do{if(l=i.data[s+4]<<24|i.data[s+5]<<16|i.data[s+6]<<8|i.data[s+7],1>l)return e.log("Malformed ID3 frame encountered. Skipping metadata parsing.");u={id:String.fromCharCode(i.data[s],i.data[s+1],i.data[s+2],i.data[s+3]),data:i.data.subarray(s+10,s+l+10)},o[u.id]&&o[u.id](u),i.frames.push(u),s+=10,s+=l}while(r>s);this.trigger("data",i)}}},s.prototype=new e.Hls.Stream,e.Hls.MetadataStream=s}(window,window.videojs),function(t){var e,i,s=t.videojs,a=s.Hls.FlvTag,r=s.Hls.H264Stream,n=s.Hls.AacStream,o=s.Hls.MetadataStream;s.Hls.SegmentParser=function(){var t,h=this,l=new Uint8Array(e),u=0,d=new r,p=new n;h.stream={programMapTable:{}},h.metadataStream=new o,h.getFlvHeader=function(t,e,i){var s,r,n,o=new Uint8Array(9),h=new DataView(o.buffer);return t=t||0,e=void 0===e?!0:e,i=void 0===i?!0:i,h.setUint8(0,70),h.setUint8(1,76),h.setUint8(2,86),h.setUint8(3,1),h.setUint8(4,(e?4:0)|(i?1:0)),h.setUint32(5,o.byteLength),0>=t?(r=new Uint8Array(o.byteLength+4),r.set(o),r.set([0,0,0,0],o.byteLength),r):(s=new a(a.METADATA_TAG),s.pts=s.dts=0,s.writeMetaDataDouble("duration",t),n=s.finalize().length,r=new Uint8Array(o.byteLength+n),r.set(o),r.set(h.byteLength,n),r)},h.flushTags=function(){d.finishFrame()},h.tagsAvailable=function(){return d.tags.length+p.tags.length},h.getNextTag=function(){var t;return t=d.tags.length?p.tags.length&&p.tags[0].dts<d.tags[0].dts?p.tags.shift():d.tags.shift():p.tags.shift(),t.finalize()},h.parseSegmentBinaryData=function(i){var a,r=0;if(u>0){if(i.byteLength+u<e)return s.log("data.length + streamBuffer.length < MP2T_PACKET_LENGTH ??"),void l.readBytes(i,i.length,l.length);a=i.subarray(0,e-u),l.set(a,u),t(l),l=new Uint8Array(e),u=0}for(;;){for(;r<i.byteLength&&71!==i[r];)r++;if(i.byteLength-r<e)return void(i.byteLength-r>0&&(l.set(i.subarray(r),u),u+=i.byteLength-r));t(i.subarray(r,r+e))?r+=e:(s.log("error parsing m2ts packet, attempting to re-align"),r++)}},t=function(t){var a,r,n,o,l,u,g,c,m,f,y,b,T,_,w,v,S,A,E=0,x=E+e,D=!!(64&t[E+1]),H=(31&t[E+1])<<8|t[E+2],U=(48&t[E+3])>>>4;if(E+=4,U>1&&(E+=t[E]+1),0===H){if(D&&(E+=1+t[E]),a=t[E],0!==a&&s.log("the table_id of the PAT should be 0x00 but was"+a.toString(16)),r=!!(1&t[E+5]))for(n=(15&t[E+1])<<8|t[E+2],E+=8,u=E+(n-5-4);u>E;E+=4)if(o=t[E]<<8|t[E+1],l=(31&t[E+2])<<8|t[E+3],0===o)h.stream.networkPid=l;else if(void 0===h.stream.pmtPid)h.stream.pmtPid=l;else if(h.stream.pmtPid!==l)throw new Error("TS has more that 1 program")}else if(H===h.stream.programMapTable[i.h264]||H===h.stream.programMapTable[i.adts]||H===h.stream.programMapTable[i.metadata]){if(D){if(0!==t[E+0]||0!==t[E+1]||1!==t[E+2])throw new Error("PES did not begin with start code");g=t[E+4]<<8|t[E+5],c=0!==(4&t[E+6]),m=t[E+7],f=t[E+8],E+=9,192&m&&(y=(14&t[E+0])<<28|(255&t[E+1])<<21|(254&t[E+2])<<13|(255&t[E+3])<<6|(254&t[E+4])>>>2,y/=45,b=y,64&m&&(b=(14&t[E+5])<<28|(255&t[E+6])<<21|(254&t[E+7])<<13|(255&t[E+8])<<6|(254&t[E+9])>>>2,b/=45)),E+=f,H===h.stream.programMapTable[i.h264]?d.setNextTimeStamp(y,b,c):H===h.stream.programMapTable[i.adts]&&p.setNextTimeStamp(y,g,c);
}H===h.stream.programMapTable[i.adts]?p.writeBytes(t,E,x-E):H===h.stream.programMapTable[i.h264]?d.writeBytes(t,E,x-E):H===h.stream.programMapTable[i.metadata]&&h.metadataStream.push({pts:y,dts:b,data:t.subarray(E)})}else if(h.stream.pmtPid===H){if(D&&(E+=1+t[E]),2!==t[E]&&s.log("The table_id of a PMT should be 0x02 but was "+t[E].toString(16)),T=!!(1&t[E+5]))for(h.stream.programMapTable={},w=(15&t[E+1])<<8|t[E+2],_=(15&t[E+10])<<8|t[E+11],w-=_,w-=13,h.stream.programMapTable.pcrPid=(31&t[E+8])<<8|t[E+9],E+=12+_;w>0;){if(v=t[E+0],S=(31&t[E+1])<<8|t[E+2],v===i.h264&&h.stream.programMapTable[v]&&h.stream.programMapTable[v]!==S)throw new Error("Program has more than 1 video stream");if(v===i.adts&&h.stream.programMapTable[v]&&h.stream.programMapTable[v]!==S)throw new Error("Program has more than 1 audio Stream");h.stream.programMapTable[v]=S,A=(15&t[E+3])<<8|t[E+4],v===i.metadata&&(h.metadataStream.descriptor=new Uint8Array(t.subarray(E+5,E+5+A))),E+=5+A,w-=5+A}}else h.stream.networkPid===H||17===H||8191===H||h.stream.programMapTable.pcrPid||s.log("Unknown PID parsing TS packet: "+H);return!0},h.getTags=function(){return d.tags},h.stats={h264Tags:function(){return d.tags.length},minVideoPts:function(){return d.tags[0].pts},maxVideoPts:function(){return d.tags[d.tags.length-1].pts},aacTags:function(){return p.tags.length},minAudioPts:function(){return p.tags[0].pts},maxAudioPts:function(){return p.tags[p.tags.length-1].pts}}},s.Hls.SegmentParser.MP2T_PACKET_LENGTH=e=188,s.Hls.SegmentParser.STREAM_TYPES=i={h264:27,adts:15,metadata:21}}(window),function(t,e,i,s,a){var r,n,o,h=function(){},l=function(){var t="[^=]*",e='"[^"]*"|[^,]*',i="(?:"+t+")=(?:"+e+")";return new RegExp("(?:^|,)("+i+")")}(),u=function(t){for(var e,i=t.split(l),s=i.length,a={};s--;)""!==i[s]&&(e=/([^=]*)=(.*)/.exec(i[s]).slice(1),e[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),a[e[0]]=e[1]);return a},d=t.Hls.Stream;r=function(){var t="";r.prototype.init.call(this),this.push=function(e){var i;for(t+=e,i=t.indexOf("\n");i>-1;i=t.indexOf("\n"))this.trigger("data",t.substring(0,i)),t=t.substring(i+1)}},r.prototype=new d,n=function(){n.prototype.init.call(this)},n.prototype=new d,n.prototype.push=function(t){var i,s;return t=t.replace(/^\s+|\s+$/g,""),0!==t.length?"#"!==t[0]?void this.trigger("data",{type:"uri",uri:t}):0!==t.indexOf("#EXT")?void this.trigger("data",{type:"comment",text:t.slice(1)}):(t=t.replace("\r",""),(i=/^#EXTM3U/.exec(t))?void this.trigger("data",{type:"tag",tagType:"m3u"}):(i=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))?(s={type:"tag",tagType:"inf"},i[1]&&(s.duration=parseFloat(i[1])),i[2]&&(s.title=i[2]),void this.trigger("data",s)):(i=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))?(s={type:"tag",tagType:"targetduration"},i[1]&&(s.duration=e(i[1],10)),void this.trigger("data",s)):(i=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))?(s={type:"tag",tagType:"totalduration"},i[1]&&(s.duration=e(i[1],10)),void this.trigger("data",s)):(i=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))?(s={type:"tag",tagType:"version"},i[1]&&(s.version=e(i[1],10)),void this.trigger("data",s)):(i=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))?(s={type:"tag",tagType:"media-sequence"},i[1]&&(s.number=e(i[1],10)),void this.trigger("data",s)):(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))?(s={type:"tag",tagType:"discontinuity-sequence"},i[1]&&(s.number=e(i[1],10)),void this.trigger("data",s)):(i=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))?(s={type:"tag",tagType:"playlist-type"},i[1]&&(s.playlistType=i[1]),void this.trigger("data",s)):(i=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))?(s={type:"tag",tagType:"byterange"},i[1]&&(s.length=e(i[1],10)),i[2]&&(s.offset=e(i[2],10)),void this.trigger("data",s)):(i=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))?(s={type:"tag",tagType:"allow-cache"},i[1]&&(s.allowed=!/NO/.test(i[1])),void this.trigger("data",s)):(i=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t))?(s={type:"tag",tagType:"stream-inf"},i[1]&&(s.attributes=u(i[1]),s.attributes.RESOLUTION&&!function(){var t=s.attributes.RESOLUTION.split("x"),i={};t[0]&&(i.width=e(t[0],10)),t[1]&&(i.height=e(t[1],10)),s.attributes.RESOLUTION=i}(),s.attributes.BANDWIDTH&&(s.attributes.BANDWIDTH=e(s.attributes.BANDWIDTH,10)),s.attributes["PROGRAM-ID"]&&(s.attributes["PROGRAM-ID"]=e(s.attributes["PROGRAM-ID"],10))),void this.trigger("data",s)):(i=/^#EXT-X-ENDLIST/.exec(t))?void this.trigger("data",{type:"tag",tagType:"endlist"}):(i=/^#EXT-X-DISCONTINUITY/.exec(t))?void this.trigger("data",{type:"tag",tagType:"discontinuity"}):(i=/^#EXT-X-KEY:?(.*)$/.exec(t))?(s={type:"tag",tagType:"key"},i[1]&&(s.attributes=u(i[1]),s.attributes.IV&&("0x"===s.attributes.IV.substring(0,2)&&(s.attributes.IV=s.attributes.IV.substring(2)),s.attributes.IV=s.attributes.IV.match(/.{8}/g),s.attributes.IV[0]=e(s.attributes.IV[0],16),s.attributes.IV[1]=e(s.attributes.IV[1],16),s.attributes.IV[2]=e(s.attributes.IV[2],16),s.attributes.IV[3]=e(s.attributes.IV[3],16),s.attributes.IV=new Uint32Array(s.attributes.IV))),void this.trigger("data",s)):void this.trigger("data",{type:"tag",data:t.slice(4,t.length)})):void 0},o=function(){var t,e=this,l=[],u={};o.prototype.init.call(this),this.lineStream=new r,this.parseStream=new n,this.lineStream.pipe(this.parseStream),this.manifest={allowCache:!0,discontinuityStarts:[]},this.parseStream.on("data",function(r){({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=r.allowed,"allowed"in r||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in r&&(u.byterange=t,t.length=r.length,"offset"in r||(this.trigger("info",{message:"defaulting offset to zero"}),r.offset=0)),"offset"in r&&(u.byterange=t,t.offset=r.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),r.duration>=0&&(u.duration=r.duration),this.manifest.segments=l},key:function(){return r.attributes?"NONE"===r.attributes.METHOD?void(t=null):r.attributes.URI?(r.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),t={method:r.attributes.METHOD||"AES-128",uri:r.attributes.URI},void(r.attributes.IV!==a&&(t.iv=r.attributes.IV))):void this.trigger("warn",{message:"ignoring key declaration without URI"}):void this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){return i(r.number)?void(this.manifest.mediaSequence=r.number):void this.trigger("warn",{message:"ignoring invalid media sequence: "+r.number})},"discontinuity-sequence":function(){return i(r.number)?void(this.manifest.discontinuitySequence=r.number):void this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+r.number})},"playlist-type":function(){return/VOD|EVENT/.test(r.playlistType)?void(this.manifest.playlistType=r.playlistType):void this.trigger("warn",{message:"ignoring unknown playlist type: "+r.playlist})},"stream-inf":function(){return this.manifest.playlists=l,r.attributes?(u.attributes||(u.attributes={}),void(u.attributes=s(u.attributes,r.attributes))):void this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},discontinuity:function(){u.discontinuity=!0,this.manifest.discontinuityStarts.push(l.length)},targetduration:function(){return!i(r.duration)||r.duration<0?void this.trigger("warn",{message:"ignoring invalid target duration: "+r.duration}):void(this.manifest.targetDuration=r.duration)},totalduration:function(){return!i(r.duration)||r.duration<0?void this.trigger("warn",{message:"ignoring invalid total duration: "+r.duration}):void(this.manifest.totalDuration=r.duration)}})[r.tagType]||h).call(e)},uri:function(){u.uri=r.uri,l.push(u),!this.manifest.targetDuration||"duration"in u||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),u.duration=this.manifest.targetDuration),t&&(u.key=t),u={}},comment:function(){}})[r.type].call(e)})},o.prototype=new d,o.prototype.push=function(t){this.lineStream.push(t)},o.prototype.end=function(){this.lineStream.push("\n")},window.videojs.m3u8={LineStream:r,ParseStream:n,Parser:o}}(window.videojs,window.parseInt,window.isFinite,window.videojs.util.mergeOptions),function(t){t.Hls.xhr=function(e,i){var s,a,r={method:"GET",timeout:45e3};return"function"!=typeof i&&(i=function(){}),"object"==typeof e&&(r=t.util.mergeOptions(r,e),e=r.url),s=new window.XMLHttpRequest,s.open(r.method,e),s.url=e,s.requestTime=(new Date).getTime(),r.responseType&&(s.responseType=r.responseType),r.withCredentials&&(s.withCredentials=!0),r.timeout&&(a=window.setTimeout(function(){4!==s.readyState&&(s.timedout=!0,s.abort())},r.timeout)),s.onreadystatechange=function(){return 4===this.readyState?(window.clearTimeout(a),s.timedout?i.call(this,"timeout",e):this.status>=400||0===this.status?i.call(this,!0,e):(this.response&&(this.responseTime=(new Date).getTime(),this.roundTripTime=this.responseTime-this.requestTime,this.bytesReceived=this.response.byteLength||this.response.length,this.bandwidth=Math.floor(this.bytesReceived/this.roundTripTime*8*1e3)),i.call(this,!1,e))):void 0},s.send(null),s}}(window.videojs),function(t,e){"use strict";var i,s,a,r,n,o,h,l,u=10;n=function(t,e){return t=isFinite(t)?t:1/0,e=isFinite(e)?e:1/0,Math.min(t,e)},o=function(t,e){return t=isFinite(t)?t:-(1/0),e=isFinite(e)?e:-(1/0),Math.max(t,e)},s=function(t,e){return t-e},i=function(t,e,i,a){var r,n=[],o=(t.discontinuityStarts||[]).concat(i),l=0;if(e>=i)return 0;for(o.sort(s),r=0;r<o.length;r++)if(o[r]>e){n.push({start:e,end:o[r]}),r++;break}for(;r<o.length;r++){if(o[r]>=i){n.push({start:o[r-1],end:i});break}n.push({start:n[n.length-1].end,end:o[r]})}for(r=0;r<n.length;r++)l+=h(t,n[r],r===n.length-1&&a);return l},h=function(t,e,i){var s,a,r,h=0,l=t.targetDuration||u;for(a=e.start;a<e.end&&(s=t.segments[a],void 0===s.minVideoPts&&void 0===s.minAudioPts);a++)h+=s.duration||l;if(i&&(s=t.segments[e.end],s&&(void 0!==s.minVideoPts||void 0!==s.minAudioPts)))return h+=.001*(n(s.minVideoPts,s.minAudioPts)-n(t.segments[a].minVideoPts,t.segments[a].minAudioPts));for(r=e.end-1;r>=a&&(s=t.segments[r],void 0===s.maxVideoPts&&void 0===s.maxAudioPts);r--)h+=s.duration||l;return r>=a&&(h+=.001*(o(t.segments[r].maxVideoPts,t.segments[r].maxAudioPts)-n(t.segments[a].minVideoPts,t.segments[a].minAudioPts))),h},r=function(t,e,s,a){var r,n,h=0;return void 0===e&&(e=t.mediaSequence||0),void 0===s&&(s=e+(t.segments||[]).length),r=t.targetDuration||u,n=o(t.mediaSequence-e,0),h+=n*r,h+=i(t,e+n-t.mediaSequence,s-t.mediaSequence,a)},a=function(e,i,s,a){if(!e)return 0;if(void 0===a&&(a=!0),void 0===i&&void 0===s){if(e.totalDuration)return e.totalDuration;if(!e.endList)return t.Infinity}return r(e,i,s,a)},l=function(t){var i,s,o,h,l,d,p;if(!t.segments)return e.createTimeRange();if(t.endList)return e.createTimeRange(0,a(t));if(i=0,s=r(t,t.mediaSequence,t.mediaSequence+t.segments.length),h=t.targetDuration||u,!t.endList)for(o=3*h,p=t.segments.length-1;p>=0&&o>0;p--)l=t.segments[p],d=n(a(t,t.mediaSequence+p,t.mediaSequence+p+1),o),o-=d,s-=d;return e.createTimeRange(i,s)},e.Hls.Playlist={duration:a,seekable:l}}(window,window.videojs),function(t,e){"use strict";var i=e.Hls.resolveUrl,s=e.Hls.xhr,a=e.Hls.Playlist,r=e.util.mergeOptions,n=function(t,e){var i,s,a=!1,n=r(t,{});for(i=t.playlists.length;i--;)if(s=n.playlists[i],s.uri===e.uri){if(s.segments&&e.segments&&s.segments.length===e.segments.length&&s.mediaSequence===e.mediaSequence)continue;n.playlists[i]=r(s,e),n.playlists[e.uri]=n.playlists[i],s.segments&&(n.playlists[i].segments=o(s.segments,e.segments,e.mediaSequence-s.mediaSequence)),a=!0}return a?n:null},o=function(t,e,i){var s,a,n=e.slice();for(i=i||0,s=Math.min(t.length,e.length+i),a=i;s>a;a++)n[a-i]=r(t[a],n[a-i]);return n},h=function(a,r){var o,l,u,d,p=this;if(h.prototype.init.call(this),!a)throw new Error("A non-empty playlist URL is required");d=function(i,s,a){var r,o,h;return p.setBandwidth(u||s),u=null,i?(p.error={status:s.status,message:"HLS playlist request error at URL: "+a,responseText:s.responseText,code:s.status>=500?4:2},p.trigger("error")):(p.state="HAVE_METADATA",r=new e.m3u8.Parser,r.push(s.responseText),r.end(),r.manifest.uri=a,h=n(p.master,r.manifest),o=1e3*(r.manifest.targetDuration||10),h?(p.master=h,p.updateMediaPlaylist_(r.manifest)):o/=2,p.media().endList||(t.clearTimeout(l),l=t.setTimeout(function(){p.trigger("mediaupdatetimeout")},o)),void p.trigger("loadedplaylist"))},p.state="HAVE_NOTHING",p.expiredPostDiscontinuity_=0,p.expiredPreDiscontinuity_=0,o=this.dispose,p.dispose=function(){u&&(u.onreadystatechange=null,u.abort(),u=null),t.clearTimeout(l),o.call(this)},p.media=function(t){var e=!1;if(!t)return p.media_;if("HAVE_NOTHING"===p.state||"HAVE_MASTER"===p.state)throw new Error("Cannot switch media playlist from "+p.state);if("string"==typeof t){if(!p.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=p.master.playlists[t]}if(e=t.uri!==p.media_.uri,p.master.playlists[t.uri].endList)return u&&(u.onreadystatechange=null,u.abort(),u=null),p.state="HAVE_METADATA",p.media_=t,void(e&&p.trigger("mediachange"));if(e){if(p.state="SWITCHING_MEDIA",u){if(i(p.master.uri,t.uri)===u.url)return;u.onreadystatechange=null,u.abort(),u=null}u=s({url:i(p.master.uri,t.uri),withCredentials:r},function(e){d(e,this,t.uri),p.trigger("mediachange")})}},p.setBandwidth=function(t){p.bandwidth=t.bandwidth},p.on("mediaupdatetimeout",function(){"HAVE_METADATA"===p.state&&(p.state="HAVE_CURRENT_METADATA",u=s({url:i(p.master.uri,p.media().uri),withCredentials:r},function(t){d(t,this,p.media().uri)}))}),s({url:a,withCredentials:r},function(n){var o,h;if(n)return p.error={status:this.status,message:"HLS playlist request error at URL: "+a,responseText:this.responseText,code:2},p.trigger("error");if(o=new e.m3u8.Parser,o.push(this.responseText),o.end(),p.state="HAVE_MASTER",o.manifest.uri=a,o.manifest.playlists){for(p.master=o.manifest,h=p.master.playlists.length;h--;)p.master.playlists[p.master.playlists[h].uri]=p.master.playlists[h];return u=s({url:i(a,o.manifest.playlists[0].uri),withCredentials:r},function(t){d(t,this,o.manifest.playlists[0].uri),t||p.trigger("loadedmetadata")}),p.trigger("loadedplaylist")}return p.master={uri:t.location.href,playlists:[{uri:a}]},p.master.playlists[a]=p.master.playlists[0],d(null,this,a),p.trigger("loadedmetadata")})};h.prototype=new e.Hls.Stream,h.prototype.updateMediaPlaylist_=function(t){var e,i,s;if(this.media_){if(i=t.mediaSequence-this.media_.mediaSequence,e=this.media_.mediaSequence,this.media_.discontinuitySequence!==t.discontinuitySequence)for(s=i;s--;)if(this.media_.segments[s].discontinuity){e=s+this.media_.mediaSequence,this.expiredPreDiscontinuity_+=this.expiredPostDiscontinuity_,this.expiredPostDiscontinuity_=0;break}this.expiredPreDiscontinuity_+=a.duration(this.media_,this.media_.mediaSequence,e),this.expiredPostDiscontinuity_+=a.duration(this.media_,e,this.media_.mediaSequence+i)}this.media_=this.master.playlists[t.uri]},h.prototype.getMediaIndexForTime_=function(t){var e;if(!this.media_)return 0;if(t-=this.expiredPreDiscontinuity_+this.expiredPostDiscontinuity_,0>t)return 0;for(e=0;e<this.media_.segments.length;e++)if(t-=a.duration(this.media_,this.media_.mediaSequence+e,this.media_.mediaSequence+e+1,!1),0>=t)return e;return this.media_.segments.length-1},e.Hls.PlaylistLoader=h}(window,window.videojs),function t(e,i,s){function a(n,o){if(!i[n]){if(!e[n]){var h="function"==typeof require&&require;if(!o&&h)return h(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var l=i[n]={exports:{}};e[n][0].call(l.exports,function(t){var i=e[n][1][t];return a(i?i:t)},l,l.exports,t,e,i,s)}return i[n].exports}for(var r="function"==typeof require&&require,n=0;n<s.length;n++)a(s[n]);return a}({1:[function(t,e,i){(function(e){e.window.pkcs7={unpad:t("./unpad")}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./unpad":2}],2:[function(t,e,i){"use strict";e.exports=function(t){return t.subarray(0,t.byteLength-t[t.byteLength-1])}},{}]},{},[1]),function(t,e,i){"use strict";var s,a,r,n,o;o=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},s=function(t){this._precompute();var e,i,s,a,r,n=this._tables[0][4],o=this._tables[1],h=t.length,l=1;if(4!==h&&6!==h&&8!==h)throw new Error("Invalid aes key size");for(a=t.slice(0),r=[],this._key=[a,r],e=h;4*h+28>e;e++)s=a[e-1],(e%h===0||8===h&&e%h===4)&&(s=n[s>>>24]<<24^n[s>>16&255]<<16^n[s>>8&255]<<8^n[255&s],e%h===0&&(s=s<<8^s>>>24^l<<24,l=l<<1^283*(l>>7))),a[e]=a[e-h]^s;for(i=0;e;i++,e--)s=a[3&i?e:e-4],4>=e||4>i?r[i]=s:r[i]=o[0][n[s>>>24]]^o[1][n[s>>16&255]]^o[2][n[s>>8&255]]^o[3][n[255&s]]},s.prototype={_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var t,e,i,s,a,r,n,o,h,l=this._tables[0],u=this._tables[1],d=l[4],p=u[4],g=[],c=[];for(t=0;256>t;t++)c[(g[t]=t<<1^283*(t>>7))^t]=t;for(e=i=0;!d[e];e^=s||1,i=c[i]||1)for(n=i^i<<1^i<<2^i<<3^i<<4,n=n>>8^255&n^99,d[e]=n,p[n]=e,r=g[a=g[s=g[e]]],h=16843009*r^65537*a^257*s^16843008*e,o=257*g[n]^16843008*n,t=0;4>t;t++)l[t][e]=o=o<<24^o>>>8,u[t][n]=h=h<<24^h>>>8;for(t=0;5>t;t++)l[t]=l[t].slice(0),u[t]=u[t].slice(0)},decrypt:function(t,e,i,s,a,r){var n,o,h,l,u=this._key[1],d=t^u[0],p=s^u[1],g=i^u[2],c=e^u[3],m=u.length/4-2,f=4,y=this._tables[1],b=y[0],T=y[1],_=y[2],w=y[3],v=y[4];for(l=0;m>l;l++)n=b[d>>>24]^T[p>>16&255]^_[g>>8&255]^w[255&c]^u[f],o=b[p>>>24]^T[g>>16&255]^_[c>>8&255]^w[255&d]^u[f+1],h=b[g>>>24]^T[c>>16&255]^_[d>>8&255]^w[255&p]^u[f+2],c=b[c>>>24]^T[d>>16&255]^_[p>>8&255]^w[255&g]^u[f+3],f+=4,d=n,p=o,g=h;for(l=0;4>l;l++)a[(3&-l)+r]=v[d>>>24]<<24^v[p>>16&255]<<16^v[g>>8&255]<<8^v[255&c]^u[f++],n=d,d=p,p=g,g=c,c=n}},n=function(t,e,i){var a,r,n,h,l,u,d,p,g,c=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),m=new s(Array.prototype.slice.call(e)),f=new Uint8Array(t.byteLength),y=new Int32Array(f.buffer);for(a=i[0],r=i[1],n=i[2],h=i[3],g=0;g<c.length;g+=4)l=o(c[g]),u=o(c[g+1]),d=o(c[g+2]),p=o(c[g+3]),m.decrypt(l,u,d,p,y,g),y[g]=o(y[g]^a),y[g+1]=o(y[g+1]^r),y[g+2]=o(y[g+2]^n),y[g+3]=o(y[g+3]^h),a=l,r=u,n=d,h=p;return f},a=function(){this.jobs=[],this.delay=1,this.timeout_=null},a.prototype=new e.Hls.Stream,a.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(e.bind(this,this.processJob_),this.delay):this.timeout_=null},a.prototype.push=function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(e.bind(this,this.processJob_),this.delay))},r=function(t,e,s,n){var h=r.STEP,l=new Int32Array(t.buffer),u=new Uint8Array(t.byteLength),d=0;for(this.asyncStream_=new a,this.asyncStream_.push(this.decryptChunk_(l.subarray(d,d+h),e,s,u,d)),d=h;d<l.length;d+=h)s=new Uint32Array([o(l[d-4]),o(l[d-3]),o(l[d-2]),o(l[d-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(d,d+h),e,s,u));this.asyncStream_.push(function(){n(null,i(u))})},r.prototype=new e.Hls.Stream,r.prototype.decryptChunk_=function(t,e,i,s){return function(){var a=n(t,e,i);s.set(a,t.byteOffset)}},r.STEP=32e3,e.Hls.decrypt=n,e.Hls.Decrypter=r,e.Hls.AsyncStream=a}(window,window.videojs,window.pkcs7.unpad);
//# sourceMappingURL=videojs_hls.min.js-vfl9BeHm6.map