(function(){define("modules/clean/notes",["jquery","external/underscore","modules/clean/dbmodal","modules/clean/register_form"],function(e,t,n,r){var o;return o=function(){function t(){var t;e("#db-modal-notes-sign-in-modal").length&&(t=new n.DBModal({element_id:"notes-sign-in-modal"}),e("#notes-sign-in-button").on("click",function(e){return e.preventDefault(),t.show()}),e(document).on(r.USER_EXISTS,function(e){return t.show(e.focus,e.prefill)}))}return t}()})}).call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("modules/clean/notes_landing_page",["jquery","modules/core/browser","modules/core/dom","modules/core/notify","modules/clean/dbmodal","modules/clean/ajax","modules/clean/components/ajax_form","modules/clean/register_form","modules/clean/viewer","modules/clean/multiaccount_login","modules/core/uri","modules/constants/viewer"],function(t,n,r,o,i,s,a,c,l,m,u,p){var d,_;return d={WORK:"work",PERSONAL:"personal"},_=function(){function c(n,r,o){this.proceedToPersonalPaper=e(this.proceedToPersonalPaper,this),this.proceedToWorkPaper=e(this.proceedToWorkPaper,this),this.onUsePersonalClick=e(this.onUsePersonalClick,this),this.onContinueToPaperClick=e(this.onContinueToPaperClick,this),this.onLoginSuccess=e(this.onLoginSuccess,this);var s,c,l;this.cont=n,this.team_id=r,this.state=o,s=t(document).find(".notes-login-form-container"),s.on(a.SUCCESS_EVENT,function(e){return function(t,n){return e.onLoginSuccess(t,n)}}(this)),c=t(document).find(".notes-create-container"),c.on(a.SUCCESS_EVENT,function(e){return function(t,n){return e.onRegisterSuccess(t,n)}}(this)),l=new i.DBModal({element_id:"paper-sign-in-modal"}),t(".paper-header-signin").click(function(e){return e.preventDefault(),l.show()}),t(".notes-promo-modal-error-button").click(function(e){return function(){return e.onErrorButtonClick()}}(this)),t(".notes-promo-modal-content-container").click(function(e){return function(){return e.onModalOverlayClick()}}(this)),t(".notes-getstarted-form-button").click(function(e){return function(){return e.onEnablePaperClick()}}(this)),t(".notes-request-form-button").click(function(e){return function(){return e.onRequestPaperClick()}}(this)),t(".notes-request-form-personal-account").click(function(e){return function(){return e.onUsePersonalClick()}}(this)),t(".notes-getstarted-form-personal-account").click(function(e){return function(){return e.onUsePersonalClick()}}(this)),t(".notes-personal-button").click(function(e){return function(){return e.onUsePersonalClick()}}(this)),t(".notes-continue-button").click(function(e){return function(){return e.onContinueToPaperClick()}}(this)),t(".notes-login-form-create-account-link").click(function(e){return function(){return e.openRegisterModal()}}(this)),"DENY_ACCESS"===o&&this.denyAccess()}return c.prototype.getNotesRedirect=function(e){var t;return t=u.parse(this.cont),t.updateQuery({role:e}).toString()},c.prototype.onRegisterSuccess=function(e,t){return s.WebRequest({url:"/paper/create_account",success:function(e){return t=JSON.parse(e),n.redirect(t.redirect)}})},c.prototype.onLoginSuccess=function(e,t){return"OK"===t.status?s.WebRequest({url:"/paper/reload_splash",success:function(e){return function(n){switch(e.hideSignin(),t=JSON.parse(n),e.state=t.state,t.state){case"PROCEED_WORK":return e.proceedToWorkPaper();case"PROCEED_PERSONAL":return e.proceedToPersonalPaper();case"DENY_ACCESS":return e.denyAccess();case"SHOW_ENABLE_AND_PERSONAL":return e.team_id=t.team_id,e.showDfbEnableTeam(t.team_name,!0);case"SHOW_REQUEST_AND_PERSONAL":return e.showDfbRequestPaper(!0);case"SHOW_ENABLE_NO_PERSONAL":return e.team_id=t.team_id,e.showDfbEnableTeam(t.team_name,!1);case"SHOW_REQUEST_NO_PERSONAL":return e.showDfbRequestPaper(!1);case"SHOW_PERSONAL_ONLY":return e.showUsePersonal();case"SHOW_CONTINUE_PERSONAL":return e.showContinueToPaper();case"SHOW_CONTINUE_WORK":return e.showContinueToPaper();default:return e.denyAccess()}}}(this)}):void 0},c.prototype.continueFromLandingPage=function(e){return s.WebRequest({url:"/paper/continue_from_landing_page",success:function(t){return e()}})},c.prototype.onContinueToPaperClick=function(){return this.continueFromLandingPage(function(e){return function(){return"SHOW_CONTINUE_PERSONAL"===e.state?e.proceedToPersonalPaper():"SHOW_CONTINUE_WORK"===e.state&&e.proceedToWorkPaper(),!1}}(this))},c.prototype.onUsePersonalClick=function(){return this.continueFromLandingPage(this.proceedToPersonalPaper),!1},c.prototype.onErrorButtonClick=function(){return this.closeModal()},c.prototype.onModalOverlayClick=function(){return t(event.target).closest(".notes-promo-modal-content").length?void 0:this.closeModal()},c.prototype.onEnablePaperClick=function(){var e,n;return e=t(".notes-getstarted-form-tos-checkbox").is(":checked"),e?s.WebRequest({url:"/team/activate_paper",data:{tos_agree:e,notes_enabled_policy:"yes",team_id:this.team_id},success:function(e){return function(t){return e.continueFromLandingPage(e.proceedToWorkPaper())}}(this),error:function(e,t,n){var r;return r=JSON.parse(n),o.error(r.tos_agree.message_text)}}):(n=t(".notes-getstarted-form-error"),void n.text("Please agree to the terms of service."))},c.prototype.onRequestPaperClick=function(){return s.WebRequest({url:"/team/request_paper",success:function(e){return function(t){return e.setModalText("Your request has been sent to your team admin.","","Got it"),e.openErrorModal()}}(this)})},c.prototype.hideSignin=function(){return t(".paper-header-signin").css("display","none"),t(".paper-header-content").css("justify-content","space-around")},c.prototype.denyAccess=function(){return this.showReturnToDropbox(),this.setModalText("Paper beta isn't available to everyone yet, but it will be soon.","","Got it"),this.openErrorModal()},c.prototype.proceedToWorkPaper=function(){return n.redirect(this.getNotesRedirect(d.WORK))},c.prototype.proceedToPersonalPaper=function(){return n.redirect(this.getNotesRedirect(d.PERSONAL))},c.prototype.showUsePersonal=function(){var e,n,r;return n=t(".notes-login-form-top"),e=t(".notes-footer-container .notes-login-form-container"),n.animate({opacity:"0"},250,function(){return n.css("visibility","hidden")}),e.animate({opacity:"0"},250,function(){return e.css("visibility","hidden")}),r=t(".notes-personal-container"),r.css("visibility","visible"),r.animate({opacity:"1.0"},500)},c.prototype.showContinueToPaper=function(){var e,n,r;return r=t(".notes-login-form-top"),e=t(".notes-footer-container .notes-login-form-container"),r.animate({opacity:"0"},250,function(){return r.css("visibility","hidden")}),e.animate({opacity:"0"},250,function(){return e.css("visibility","hidden")}),n=t(".notes-continue-container"),n.css("visibility","visible"),n.animate({opacity:"1.0"},500)},c.prototype.showReturnToDropbox=function(){var e,n,r,o;return o=t(".notes-login-form-top"),e=t(".notes-footer-container .notes-login-form-container"),n=t(".notes-footer-text"),o.animate({opacity:"0"},250,function(){return o.css("visibility","hidden")}),e.animate({opacity:"0"},250,function(){return e.css("visibility","hidden")}),n.animate({opacity:"0"},250,function(){return n.css("visibility","hidden")}),r=t(".notes-return-container"),r.css("visibility","visible"),r.animate({opacity:"1.0"},500)},c.prototype.showDfbEnableTeam=function(e,n){var r,o,i,s,a;return n||(s=t(".notes-getstarted-form-personal-account"),s.hide()),o=t(".notes-getstarted-form-button"),o.text("Enable Paper for "+e),a=t(".notes-login-form-top"),r=t(".notes-footer-container .notes-login-form-container"),a.animate({opacity:"0"},250,function(){return a.css("visibility","hidden")}),r.animate({opacity:"0"},250,function(){return r.css("visibility","hidden")}),i=t(".notes-getstarted-form-container"),i.css("visibility","visible"),i.animate({opacity:"1.0"},500)},c.prototype.showDfbRequestPaper=function(e){var n,r,o,i;return e||(r=t(".notes-request-form-personal-account"),r.hide()),i=t(".notes-login-form-top"),n=t(".notes-footer-container .notes-login-form-container"),i.animate({opacity:"0"},250,function(){return i.css("visibility","hidden")}),n.animate({opacity:"0"},250,function(){return n.css("visibility","hidden")}),o=t(".notes-request-form-container"),o.css("visibility","visible"),o.animate({opacity:"1.0"},500)},c.prototype.setModalText=function(e,n,r){return t(".notes-promo-modal-error-title").text(e),t(".notes-promo-modal-error-subtitle").text(n),t(".notes-promo-modal-error-button").text(r)},c.prototype.closeModal=function(){var e;return t(".notes-modal.db-modal-overlay").remove(),e=t(".notes-promo-modal-content"),e.removeClass("notes-promo-modal-content-animate"),setTimeout(function(e){return function(){return e.hideModalContent()}}(this),300),r.scroll_unlock_document()},c.prototype.hideModalContent=function(){return t(".notes-promo-modal-root").css("display","none"),t(".notes-promo-modal-error").css("display","none"),t(".notes-promo-modal-register").css("display","none")},c.prototype.openErrorModal=function(){return t(".notes-promo-modal-error").css("display","block"),this.openModal()},c.prototype.openRegisterModal=function(){return t(".notes-promo-modal-register").css("display","block"),this.openModal(),!1},c.prototype.openModal=function(){var e,n;return r.scroll_lock_document(),e=t(".notes-promo-modal-root"),n=t(".notes-promo-modal-content"),t("<div />",{class:"notes-modal db-modal-overlay"}).appendTo("body"),e.css("display","block"),setTimeout(function(){return n.addClass("notes-promo-modal-content-animate")},100)},c}()})}.call(this),function(){var e=function(e,n){function r(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e},t={}.hasOwnProperty,n=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};define("modules/clean/react/client/classic_onboarding/actions_store",["external/immutable","external/purl","external/react","modules/clean/flux/base_store","modules/clean/flux/dispatcher","modules/clean/react/client/classic_onboarding/constants","modules/clean/react/client/classic_onboarding/services","modules/clean/server_side_client_view_bridge","modules/core/browser","modules/core/exception"],function(t,r,o,i,s,a,c,l,m,u){var p,d,_,h,f,g,E,b,y,T,v,S,N,C,O,I,P,D,A,x;return C=t.Map,O=t.Set,N=t.List,p=a.ActionTypes,d=a.CDOActionTypes,g=a.CDOScreenTypes,T=a.CDOTutorialTypes,y=a.CDOTutorialScreenMap,v=a.CDOUrlHashDupeMap,f=a.CDOExperimentVersions,A=a.isTutorialScreen,x=a.isValidScreenType,D=a.getTrayHeightForScreen,S=c.FluxWebOnlineAjax,h=c.CDOClientEventMonitor,P=u.assert,E=function(){function e(){}return e.saveTutorialCompleteStatus=function(e){return S.request({url:"/growth/classic_onboarding/tutorial_completed",dataType:"json",data:{tutorial_type:e}})},e.currentUserEmailVerified=function(){return S.request({url:"/growth/classic_onboarding/current_user_email_verified",dataType:"json"})},e}(),I=function(){function e(){}return e._default_poll_rate=2e3,e._verify_timeout_id=null,e._startVerifyPoll=function(e,t){var n;return n=t||this._default_poll_rate,E.currentUserEmailVerified().then(function(t){return function(r){return r.email_verified?e.resolve(r):t._verify_timeout_id=setTimeout(function(){return t._startVerifyPoll(e,n)},n)}}(this)).catch(e.reject)},e.waitForVerify=function(e){var t;return this.stopWait(),t=Promise.defer(),this._startVerifyPoll(t,e),t.promise},e.stopWait=function(){return clearTimeout(this._verify_timeout_id)},e.getVerify=function(){return E.currentUserEmailVerified()},e}(),_=function(){function e(){}return e.watchForDupesIfTestMode=function(){var e,t,n;return e=m.get_href(),void 0!==r(e).param("is_test")?(t=function(){var e,t;return e=m.get_hash(),t=v[e],t?s.dispatch({type:t.type,data:t.data}):void 0},window.addEventListener("hashchange",t),n=function(){return window.removeEventListener("hashchange",t)}):void 0},e.setAssetPaths=function(e){return s.dispatch({type:d.SET_ASSET_PATHS,data:e})},e.setDBImgCache=function(e){return s.dispatch({type:d.SET_DB_IMG_CACHE,data:e})},e.setOnboardingSessionId=function(e){return s.dispatch({type:d.SET_ONBOARDING_SESSION_ID,data:e})},e.adjustTrayHeightForScreen=function(){return s.dispatch({type:d.ADJUST_TRAY_HEIGHT_FOR_SCREEN})},e.setCountryCode=function(e){return s.dispatch({type:d.SET_COUNTRY_CODE,data:e})},e.setUserData=function(e){return s.dispatch({type:d.SET_USER_DATA,data:e})},e.changeScreen=function(e){return s.dispatch({type:d.CHANGE_SCREEN,data:{screenType:e}})},e.startTutorial=function(e){return s.dispatch({type:d.START_TUTORIAL,data:{tutorialType:e}})},e.markTutorialDone=function(e){return s.dispatch({type:d.TUTORIAL_COMPLETE,data:{tutorialType:e}})},e.abandonTutorial=function(){return s.dispatch({type:d.ABANDON_TUTORIAL})},e.reportEvent=function(e,t){return null==t&&(t={}),s.dispatch({type:d.REPORT_EVENT,data:{eventName:e,extra:t}})},e.endOnboarding=function(){return s.dispatch({type:d.END_ONBOARDING})},e.pinTray=function(){return s.dispatch({type:d.PIN_TRAY})},e.openDBFolder=function(){return s.dispatch({type:d.OPEN_DB_FOLDER})},e.openDocumentsFolder=function(){return s.dispatch({type:d.OPEN_DOCUMENTS_FOLDER})},e.unpinTray=function(){return s.dispatch({type:d.UNPIN_TRAY})},e.watchForEvent=function(){var e;return h.start(),e=function(){return h.stop()}},e.waitVerifyByEmail=function(){return I.getVerify().then(function(e){var t;return t=e.email_verified,t?s.dispatch({type:d.USER_VERIFIED_EMAIL}):(s.dispatch({type:d.WAITING_FOR_EMAIL_VERIFY,data:{waiting:!0}}),I.waitForVerify().then(function(){return s.dispatch({type:d.WAITING_FOR_EMAIL_VERIFY,data:{waiting:!1}}),s.dispatch({type:d.USER_VERIFIED_EMAIL})}))})},e.stopWaitVerifyByEmail=function(){return I.stopWait(),s.dispatch({type:d.WAITING_FOR_EMAIL_VERIFY,data:{waiting:!1}})},e}(),b=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype._init=function(){return this._currentScreenType=g.TABLE_OF_CONTENTS,this._countryCode="us",this._completedTutorialTypes=O(),this._assetSrcMap=C(),this._onboardingSessionId=null,this._tutorialSessionId=null,this._screen_queue=N(),this._currentTutorialType=null,this._userHasAddedFile=!1,this._stormcrowVariant=null,this._recentMobileActivity=null,this._webIsOnline=!0,this._dBImgCache=null,this._userIsEmailVerified=!1,this._waitingForEmailVerify=!1},r.prototype._setAssetPaths=function(e){return this._assetSrcMap=C(e)},r.prototype._setDBImgCache=function(e){return this._dBImgCache=e},r.prototype._setOnboardingSessionId=function(e){return this._onboardingSessionId=e},r.prototype._setCountryCode=function(e){return this._countryCode=e},r.prototype._queueScreenTransition=function(e,t){var n,r,o;return this._screen_queue.size||(this._screen_queue=N([Promise.resolve()])),o=function(e){var t;return t=Promise.defer(),setTimeout(t.resolve,e),t.promise},n=function(e){return function(t,n){return function(){return e._adjustTrayHeightForScreen(t),e._setPinStateForScreen(t),e._currentScreenType=t,e.emit_change(),o(n)}}}(this),r=n(e,t),this._screen_queue.last().then(function(e){return function(){return e._screen_queue=e._screen_queue.pop().push(r())}}(this))},r.prototype._adjustTrayHeightForScreen=function(e){var t;return t=D(e||this._currentScreenType),this._setTrayHeight(t)},r.prototype._setPinStateForScreen=function(e){return A(e)?this._pinTray():this._unpinTray()},r.prototype._changeCurrentScreen=function(e){switch(P(x(e),"not a valid screen type"),e){case g.INSTALL_APP_MOVE_FILE_INTO_DROPBOX:this._userHasAddedFile&&(this._recentMobileActivity&&this.experimentVersion()>=2||(e=g.INSTALL_MOBILE_APP,this.experimentVersion()>=2&&setTimeout(this._openDBFolder,800)));break;case g.COPY_LINK_MOVE_FILE_INTO_DROPBOX:this._userHasAddedFile&&(e=g.COPY_FILE_LINK);break;case g.INSTALL_MOBILE_APP:this.experimentVersion()>=2&&this._recentMobileActivity&&(e=g.POST_INSTALL_MOBILE_APP)}return this._reportEvent("screen_change",{next_screen:e}),this._queueScreenTransition(e),this.emit_change()},r.prototype._setTrayHeight=function(e){return l.CDOSetOnboardingHeight(e)},r.prototype._fileAddedToDBFolder=function(e){switch(this._userHasAddedFile=!0,this._currentScreenType){case g.INSTALL_APP_MOVE_FILE_INTO_DROPBOX:return this._reportEvent("file_added",{extension:e}),this._changeCurrentScreen(g.INSTALL_MOBILE_APP);case g.COPY_LINK_MOVE_FILE_INTO_DROPBOX:return this._reportEvent("file_added",{extension:e}),this._changeCurrentScreen(g.COPY_FILE_LINK)}},r.prototype._fileLinkCopied=function(e,t){switch(this._currentScreenType){case g.COPY_FILE_LINK:return this._reportEvent("link_copied",{extension:e,is_dir:t}),this._changeCurrentScreen(g.POST_FILE_LINK_COPIED)}},r.prototype._folderCreated=function(){switch(this._currentScreenType){case g.CREATE_SUB_FOLDER:return this._reportEvent("folder_created"),this._changeCurrentScreen(g.SHARE_FOLDER)}},r.prototype._folderShared=function(e){switch(this._currentScreenType){case g.INVITE_TO_FOLDER:return this._reportEvent("folder_shared",{ns_id:e}),this._tutorialComplete(T.CREATE_SHARED_FOLDER)}},r.prototype._folderShareClicked=function(){switch(this._currentScreenType){case g.SHARE_FOLDER:case g.SHARE_FOLDER_VERIFY_EMAIL:return this._reportEvent("folder_share_clicked"),this._userIsEmailVerified?this._changeCurrentScreen(g.INVITE_TO_FOLDER):this._changeCurrentScreen(g.SHARE_FOLDER_VERIFY_EMAIL)}},r.prototype._generateTutorialSessionId=function(){return Math.random().toString(16).slice(2)},r.prototype._startTutorial=function(e){var t;return this._currentTutorialType=e,this._tutorialSessionId=this._generateTutorialSessionId(),this._reportEvent("tutorial_started"),t=y[e][0],this._changeCurrentScreen(t)},r.prototype._tutorialComplete=function(e){var t,n;return this._reportEvent("tutorial_complete"),t=O(Object.keys(T)),this._completedTutorialTypes=this._completedTutorialTypes.add(e),n=t.subtract(this._completedTutorialTypes),0===n.size?this._changeCurrentScreen(g.ONBOARDING_FINISHED):this._changeCurrentScreen(g.TABLE_OF_CONTENTS),this._currentTutorialType=null,this._tutorialSessionId=null,E.saveTutorialCompleteStatus(e)},r.prototype._abandonTutorial=function(){return this._reportEvent("tutorial_abandoned"),this._changeCurrentScreen(g.TABLE_OF_CONTENTS),this._currentTutorialType=null,this._tutorialSessionId=null},r.prototype._endOnboarding=function(){return l.CDOUnpinTrayPopup(),l.CDOHideTrayOnboarding(),l.CDOClearShowTrayConfig()},r.prototype._pinTray=function(){return l.CDOPinTrayPopup()},r.prototype._unpinTray=function(){return l.CDOUnpinTrayPopup()},r.prototype._openDBFolder=function(){return l.CDOOpenDropboxFolder()},r.prototype._openDocumentsFolder=function(){return l.CDOOpenUserFolder(5)},r.prototype._reportEvent=function(e,t){return null==t&&(t={}),null!=this._currentTutorialType&&(t.tutorial_type=this._currentTutorialType,t.tutorial_session_id=this._tutorialSessionId),t.current_screen=this._currentScreenType,t.stormcrow_variant=this._stormcrowVariant,l.ReportEvent("classic_onboarding",{event_name:e,source:"server-view",onboarding_session_id:this._onboardingSessionId,extra:t})},r.prototype._getTutorialProgressFromScreen=function(e){var t,r,o,i;for(i in y)if(r=y[i],n.call(r,e)>=0)return o=r.indexOf(e),t=r.length,{numSections:t,numComplete:o+1}},r.prototype._setUserData=function(e){return this._completedTutorialTypes=this._completedTutorialTypes.union(e.completed_tutorials),this._userHasAddedFile=e.user_has_added_file,this._stormcrowVariant=e.stormcrow_variant,this._recentMobileActivity=e.recent_mobile_activity,this._reportEvent("user_data",e),this.emit_change()},r.prototype._setWebOnlineState=function(){return this._webIsOnline=!0,this.emit_change()},r.prototype._setWebOfflineState=function(){return this._webIsOnline=!1,this.emit_change()},r.prototype._setUserIsEmailVerified=function(){return this._reportEvent("email_verified"),this._userIsEmailVerified=!0,this.emit_change()},r.prototype._setWaitingForEmailVerify=function(e){return this._waitingForEmailVerify=e,this.emit_change()},r.prototype.assetPath=function(e){return this._assetSrcMap.get(e)},r.prototype.dbImgCache=function(){return this._dBImgCache},r.prototype.countryCode=function(){return this._countryCode},r.prototype.currentScreenType=function(){return this._currentScreenType},r.prototype.currentTutorialType=function(){return this._currentTutorialType},r.prototype.completedTutorialTypes=function(){return this._completedTutorialTypes},r.prototype.currentTutorialProgress=function(){return this._getTutorialProgressFromScreen(this._currentScreenType)},r.prototype.shouldDisplayProgressBar=function(){return A(this._currentScreenType)},r.prototype.hasUserAddedFile=function(){return this._userHasAddedFile},r.prototype.recentMobileActivity=function(){return this._recentMobileActivity},r.prototype.experimentVersion=function(){return this._stormcrowVariant in f?f[this._stormcrowVariant]:1/0},r.prototype.webIsOnline=function(){return this._webIsOnline},r.prototype.waitingForEmailVerify=function(e){return this._waitingForEmailVerify},r.prototype._new_payload=function(e){var t;switch(t=e.action.data,e.action.type){case d.SET_ASSET_PATHS:return this._setAssetPaths(t);case d.SET_DB_IMG_CACHE:return this._setDBImgCache(t);case d.SET_ONBOARDING_SESSION_ID:return this._setOnboardingSessionId(t);case d.SET_COUNTRY_CODE:return this._setCountryCode(t);case d.SET_USER_DATA:return this._setUserData(t);case d.CHANGE_SCREEN:return this._changeCurrentScreen(t.screenType);case d.START_TUTORIAL:return this._startTutorial(t.tutorialType);case d.ADJUST_TRAY_HEIGHT_FOR_SCREEN:return this._adjustTrayHeightForScreen();case d.TUTORIAL_COMPLETE:return this._tutorialComplete(t.tutorialType);case d.ABANDON_TUTORIAL:return this._abandonTutorial();case d.REPORT_EVENT:return this._reportEvent(t.eventName,t.extra);case d.END_ONBOARDING:return this._endOnboarding();case d.PIN_TRAY:return this._pinTray();case d.UNPIN_TRAY:return this._unpinTray();case d.OPEN_DB_FOLDER:return this._openDBFolder();case d.OPEN_DOCUMENTS_FOLDER:return this._openDocumentsFolder();case d.USER_VERIFIED_EMAIL:return this._setUserIsEmailVerified();case d.WAITING_FOR_EMAIL_VERIFY:return this._setWaitingForEmailVerify(t.waiting);case p.WEB_OFFLINE:return this._setWebOfflineState();case p.WEB_ONLINE:return this._setWebOnlineState();case p.FOLDER_CREATED:return this._folderCreated();case p.FILE_ADDED_TO_DB_FOLDER:return this._fileAddedToDBFolder(t.extension);case p.FILE_LINK_COPIED:return this._fileLinkCopied(t.extension,t.is_dir);case p.FOLDER_SHARE_CLICKED:return this._folderShareClicked();case p.FOLDER_SHARED:return this._folderShared(t.ns_id)}},r}(i),{CDOStore:new b,CDOActions:_,UserAccountEmail:I}})}.call(this),function(){define("modules/clean/react/client/classic_onboarding/components",["external/classnames","external/react","modules/clean/react/dbimg","modules/core/i18n"],function(e,t,n,r){var o,i,s,a,c,l,m,u,p,d,_,h,f;return c=r._,p=t.DOM,u=t.createElement,h=t.PropTypes,f=h.string,_=h.object,m=h.bool,d=h.number,l=h.array,s=t.addons.PureRenderMixin,i=t.createClass({displayName:"PreloadImageAssetsWrapper",mixins:[s],propTypes:{blockingSrcList:l,lazySrcList:l,retryRateMS:d,retryOnLoadFailure:m},getDefaultProps:function(){return{retryRateMS:3e3,retryOnLoadFailure:!1}},getInitialState:function(){return{blockingImagesLoaded:!1,lazyImagesLoaded:!1}},_loadImages:function(e){var t,n;return t=[],n=e.map(function(e,n){var r,o;return r=Promise.defer(),o=new Image,o.src=e,o.onload=r.resolve,o.onerror=function(){return t.push(e),r.resolve()},r.promise}),Promise.all(n).then(function(){return t.length?Promise.reject(t):Promise.resolve()})},_loadImagesWithRetry:function(e,t){var n,r,o;return r=this.props.retryRateMS,o=this.props.retryOnLoadFailure,t=t||Promise.defer(),n=this._loadImages(e),n.then(t.resolve).catch(function(e){return function(n){return o?setTimeout(function(){return e._loadImagesWithRetry(n,t)},r):void 0}}(this)),t.promise},componentWillMount:function(){var e,t;return t=this._loadImagesWithRetry(this.props.lazySrcList),e=this._loadImagesWithRetry(this.props.blockingSrcList),t.then(function(e){return function(){return e.setState({lazyImagesLoaded:!0})}}(this)),e.then(function(e){return function(){return e.setState({blockingImagesLoaded:!0})}}(this))},render:function(){return this.state.blockingImagesLoaded?this.props.children:null}}),o=t.createClass({displayName:"MediaObject",mixins:[s],propTypes:{imgSrc:f,dbImgCache:_},render:function(){return p.div({className:"media"},u(n,{className:"media__figure",imgSrcCache:this.props.dbImgCache,src:this.props.imgSrc}),p.div({className:"media__body"},this.props.children))}}),a=t.createClass({displayName:"SteppedProgressBar",mixins:[s],propTypes:{numSections:d,numComplete:d,shouldDisplay:m},getInitialState:function(){return{keepLastProgress:!1}},componentWillReceiveProps:function(e){return this.setState({isShowing:e.shouldDisplay&&!this.props.shouldDisplay,isHiding:this.props.shouldDisplay&&!e.shouldDisplay})},render:function(){return p.progress({className:e({"stepped-progress-bar":!0,"stepped-progress-bar--revealed":this.props.shouldDisplay,"stepped-progress-bar--is-showing":this.state.isShowing,"stepped-progress-bar--is-hiding":this.state.isHiding}),max:this.props.numSections,value:this.props.numComplete})}}),{PreloadImageAssetsWrapper:i,MediaObject:o,SteppedProgressBar:a}})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};define("modules/clean/react/client/classic_onboarding/constants",[],function(){var t,n,r,o,i,s,a,c,l,m,u,p,d,_;return t={WEB_ONLINE:"WEB_AJAX_WEB_ONLINE",WEB_OFFLINE:"WEB_AJAX_WEB_OFFLINE",FOLDER_CREATED:"CLIENT_EVENT_FOLDER_CREATED",FILE_ADDED_TO_DB_FOLDER:"CLIENT_EVENT_FILE_ADDED_TO_DB_FOLDER",FILE_LINK_COPIED:"CLIENT_EVENT_FILE_LINK_COPIED",FOLDER_SHARED:"CLIENT_EVENT_FOLDER_SHARED",FOLDER_SHARE_CLICKED:"CLIENT_EVENT_FOLDER_SHARE_CLICKED"},m={FILE_ADDED:"file_added",COPY_LINK:"copy_link",SHARED_FOLDER_CREATED:"shared_folder_created",SHARE_CLICKED:"share_clicked"},n={SET_ASSET_PATHS:"CDO_SET_ASSET_PATHS",SET_DB_IMG_CACHE:"CDO_SET_DB_IMG_CACHE",SET_ONBOARDING_SESSION_ID:"CDO_SET_ONBOARDING_SESSION_ID",SET_COUNTRY_CODE:"CDO_SET_COUNTRY_CODE",SET_USER_DATA:"CDO_SET_USER_DATA",CHANGE_SCREEN:"CDO_CHANGE_SCREEN",START_TUTORIAL:"CDO_START_TUTORIAL",ADJUST_TRAY_HEIGHT_FOR_SCREEN:"ADJUST_TRAY_HEIGHT_FOR_SCREEN",TUTORIAL_COMPLETE:"CDO_TUTORIAL_COMPLETE",ABANDON_TUTORIAL:"CDO_ABANDON_TUTORIAL",REPORT_EVENT:"CDO_REPORT_EVENT",END_ONBOARDING:"CDO_END_ONBOARDING",PIN_TRAY:"CDO_PIN_TRAY",UNPIN_TRAY:"CDO_UNPIN_TRAY",OPEN_DB_FOLDER:"CDO_OPEN_DB_FOLDER",OPEN_DOCUMENTS_FOLDER:"CDO_OPEN_DOCUMENTS_FOLDER",USER_VERIFIED_EMAIL:"USER_VERIFIED_EMAIL",WAITING_FOR_EMAIL_VERIFY:"WAITING_FOR_EMAIL_VERIFY"},i={TABLE_OF_CONTENTS:"TABLE_OF_CONTENTS",INSTALL_APP_MOVE_FILE_INTO_DROPBOX:"INSTALL_APP_MOVE_FILE_INTO_DROPBOX",COPY_LINK_MOVE_FILE_INTO_DROPBOX:"COPY_LINK_MOVE_FILE_INTO_DROPBOX",INSTALL_MOBILE_APP:"INSTALL_MOBILE_APP",POST_INSTALL_MOBILE_APP:"POST_INSTALL_MOBILE_APP",COPY_FILE_LINK:"COPY_FILE_LINK",CREATE_SUB_FOLDER:"CREATE_SUB_FOLDER",SHARE_FOLDER:"SHARE_FOLDER",SHARE_FOLDER_VERIFY_EMAIL:"SHARE_FOLDER_VERIFY_EMAIL",POST_FILE_LINK_COPIED:"POST_FILE_LINK_COPIED",INVITE_TO_FOLDER:"INVITE_TO_FOLDER",ONBOARDING_SKIPPED:"ONBOARDING_SKIPPED",ONBOARDING_FINISHED:"ONBOARDING_FINISHED"},c={SEE_FILES_ON_PHONE:"SEE_FILES_ON_PHONE",SHARE_FILE_LINK:"SHARE_FILE_LINK",CREATE_SHARED_FOLDER:"CREATE_SHARED_FOLDER"},_={},_[""+c.SEE_FILES_ON_PHONE]=[i.INSTALL_APP_MOVE_FILE_INTO_DROPBOX,i.INSTALL_MOBILE_APP,i.POST_INSTALL_MOBILE_APP],_[""+c.SHARE_FILE_LINK]=[i.COPY_LINK_MOVE_FILE_INTO_DROPBOX,i.COPY_FILE_LINK,i.POST_FILE_LINK_COPIED],_[""+c.CREATE_SHARED_FOLDER]=[i.CREATE_SUB_FOLDER,i.SHARE_FOLDER,i.SHARE_FOLDER_VERIFY_EMAIL,i.INVITE_TO_FOLDER],a=_,s={200:[i.INSTALL_APP_MOVE_FILE_INTO_DROPBOX,i.INSTALL_MOBILE_APP,i.POST_INSTALL_MOBILE_APP,i.COPY_LINK_MOVE_FILE_INTO_DROPBOX,i.COPY_FILE_LINK,i.POST_FILE_LINK_COPIED,i.CREATE_SUB_FOLDER,i.SHARE_FOLDER,i.SHARE_FOLDER_VERIFY_EMAIL,i.INVITE_TO_FOLDER,i.ONBOARDING_SKIPPED,i.ONBOARDING_FINISHED],270:[i.TABLE_OF_CONTENTS]},l={file_added:{type:t.FILE_ADDED_TO_DB_FOLDER,data:{extension:"sample"}},folder_created:{type:t.FOLDER_CREATED},copy_link:{type:t.FILE_LINK_COPIED,data:{extension:"sample",is_dir:!1}},shared_folder_created:{type:t.FOLDER_SHARED},share_clicked:{type:t.FOLDER_SHARE_CLICKED},text_sent:{type:n.CHANGE_SCREEN,data:{screenType:i.POST_INSTALL_MOBILE_APP}},email_verified:{type:n.CHANGE_SCREEN,data:{screenType:i.INVITE_TO_FOLDER}}},o={pdf:"pdf",jpg:"jpg",docx:"docx",png:"png",xlsx:"xlsx",doc:"doc",xls:"xls",pptx:"pptx",zip:"zip",txt:"txt",mp4:"mp4",psd:"psd",mov:"mov",gif:"gif",mp3:"mp3",jpeg:"jpeg",xml:"xml",html:"html",dwl:"dwl",log:"log",ai:"ai",dwl2:"dwl2",ppt:"ppt",dwg:"dwg",bak:"bak",csv:"csv",tif:"tif",rtf:"rtf",exe:"exe",js:"js",lnk:"lnk",css:"css",rar:"rar",msg:"msg",lock:"lock",htm:"htm",odt:"odt",eps:"eps",tmp:"tmp",indd:"indd",idlk:"idlk",xlsm:"xlsm",bmp:"bmp","1password":"1password",pages:"pages",dat:"dat",wav:"wav",ini:"ini",gz:"gz",ttf:"ttf",plist:"plist",avi:"avi",svg:"svg",ldb:"ldb",json:"json",crdownload:"crdownload",dll:"dll",tex:"tex",y4backup:"y4backup",m4a:"m4a",tiff:"tiff",otf:"otf",php:"php",url:"url",ico:"ico",key:"key",aux:"aux",ods:"ods",ydiff:"ydiff",pub:"pub",wmv:"wmv",eml:"eml",lck:"lck",m:"m",laccdb:"laccdb",md:"md",skp:"skp",lst:"lst",1:"1",sql:"sql",m4v:"m4v",cdr:"cdr",out:"out",0:"0",db:"db",bin:"bin",16:"16",h:"h",py:"py",numbers:"numbers",cache:"cache",swf:"swf",epub:"epub",mdb:"mdb",2016:"2016",bat:"bat",sh:"sh","gz(busy)":"gz(busy)",java:"java",woff:"woff",nd:"nd",dsn:"dsn",class:"class",eot:"eot",hwp:"hwp",dxf:"dxf",jar:"jar",2:"2",c:"c",qbb:"qbb",mpg:"mpg",cfs:"cfs",map:"map","7z":"7z",blg:"blg",apk:"apk",swp:"swp",cfg:"cfg",bbl:"bbl",inf:"inf","3gp":"3gp",config:"config",dmg:"dmg",asv:"asv",gitignore:"gitignore",properties:"properties",cfx:"cfx",idx:"idx",idml:"idml",mat:"mat",pdb:"pdb",webarchive:"webarchive"},r={CLASSIC_ONBOARDING:1,CLASSIC_ONBOARDING_V2:2},p=function(t){var n,r;for(r in a)if(n=a[r],e.call(n,t)>=0)return!0;return!1},d=function(t){var n;return n=Object.keys(i).map(function(e){return i[e]}),e.call(n,t)>=0},u=function(t){var n,r;for(n in s)if(r=s[n],e.call(r,t)>=0)return parseInt(n);return 0},{ActionTypes:t,ClientEvents:m,CDOActionTypes:n,CDOScreenTypes:i,CDOTutorialTypes:c,CDOTutorialScreenMap:a,CDOUrlHashDupeMap:l,CDOFileExtensionWhitelist:o,CDOExperimentVersions:r,isTutorialScreen:p,isValidScreenType:d,getTrayHeightForScreen:u}})}.call(this),function(){define("modules/clean/react/client/classic_onboarding/content",["external/immutable","external/react","modules/core/i18n"],function(e,t,n){var r,o,i,s,a,c;return o=e.Map,i=n._,a=t.DOM,c=function(e){return a.em({},e)},s=function(e){return a.br({},e)},r=o({toc_header:i("Show me how to..."),see_files_on_phone_heading:i("See my files on my phone"),get_to_my_files_heading:i("Get to my files from anywhere"),see_files_on_phone_info:i("With the Dropbox mobile app"),share_file_heading:i("Share a file of any size fast"),share_file_info:i("By simply sending a link"),create_shared_folder_heading:i("Edit files together easily"),create_shared_folder_info:i("By creating a shared folder"),move_file_instruction:[i("First, "),c(i("move a file")),i(" into your Dropbox folder...")],install_app_instruction_heading:i("Install the Dropbox app."),install_app_instruction_subheading:i("on your phone."),install_app_button_text:i("Text me a link"),send_in_progress_button_text:i("Sending..."),after_app_text_message:[i("Great! Now "),c(i("sign in")),i(" to the Dropbox mobile app to see your files there.")],open_app_to_see_files:[i("Great! Now "),c(i("open the Dropbox app on your phone")),i(" to see it there.")],copy_link_instruction:[c(i("Right-click a file")),i(" in your Dropbox folder, and choose "),c(i("“Copy Dropbox Link...”"))],after_link_copy_message:[i("Perfect! Now you can "),c(i("paste the link")),i(" into a text, chat, or email.")],create_folder_instruction:[c(i("Create a new folder")),i(" inside your Dropbox folder.")],
share_folder_instruction:[c(i("Right-click the folder")),i(" and choose "),c(i("“Share...”"))],invite_to_sf_instruction:[i("Fantastic! "),c(i("Now add someone’s email address")),i(" to invite them to the folder.")],verify_email_message:i("Waiting for you to verify your email."),finish_tutorial_button_text:i("Got it"),end_onboarding_button_text:i("Got it"),onboarding_finished_message:[c(i("All set!")),s(),i(" Now you’re ready to use Dropbox.")],skip_onboarding_button_text:i("Skip"),onboarding_skipped_message:[i("To show again, "),c(i("open settings",{comment:"instructing user to open the settings menu"})),i(" and select "),c(i("“Show how to...”."))],exit_tutorial_button_text:i("Back"),telephone_input_dropdown_heading:i("Choose your country:"),phone_number_invalid_error_message:i("Enter a valid phone number"),send_text_error_message:i("An error occurred."),no_online_connection_error_msg:i("You’re offline. Reconnecting...")}),{Content:r}})}.call(this),function(){define("modules/clean/react/client/classic_onboarding/services",["modules/clean/ajax","modules/clean/flux/dispatcher","modules/clean/react/client/classic_onboarding/constants","modules/clean/server_side_client_view_bridge","modules/core/exception"],function(e,t,n,r,o){var i,s,a,c,l,m,u;return m=e.WebRequest,i=n.ActionTypes,c=n.ClientEvents,a=n.CDOFileExtensionWhitelist,u=o.raiseAndReport,l=function(){function e(){}return e._onlineCheckPollFreq=500,e._onlineCheckIntvId=null,e._ensureOnlinePoll=function(){return this._onlineCheckIntvId?void 0:this._onlineCheckIntvId=setInterval(function(e){return function(){return navigator.onLine?(clearInterval(e._onlineCheckIntvId),e._onlineCheckIntvId=null,t.dispatch({type:i.WEB_ONLINE})):void 0}}(this),this._onlineCheckPollFreq)},e.request=function(e){var n;return n=Promise.defer(),e.success=function(e){return n.resolve(e)},e.error=function(e){return function(r){return navigator.onLine||(t.dispatch({type:i.WEB_OFFLINE}),e._ensureOnlinePoll()),n.reject(r)}}(this),m(e),n.promise},e}(),s=function(){function e(){}return e._interval_id=null,e._number_of_watchers=0,e._path_to_extension=function(e){var t;return t=e.split(".").pop().toLowerCase(),t in a||(t="other"),t},e._handle_event=function(n){var r,o,s,a,l,m,u,p;switch(o=n[0],r=n[1],o){case c.FILE_ADDED:return p=r.sync_operation,a=p[7],a?t.dispatch({type:i.FOLDER_CREATED}):(l=p[0],s=e._path_to_extension(l),t.dispatch({type:i.FILE_ADDED_TO_DB_FOLDER,data:{extension:s}}));case c.COPY_LINK:return a=r.is_dir,l=r.local_path,s=e._path_to_extension(l),t.dispatch({type:i.FILE_LINK_COPIED,data:{is_dir:a,extension:s}});case c.SHARED_FOLDER_CREATED:return m=r.mount_change,u=m[1],t.dispatch({type:i.FOLDER_SHARED,data:{ns_id:u}});case c.SHARE_CLICKED:return t.dispatch({type:i.FOLDER_SHARE_CLICKED})}},e.start=function(){var e;return this._number_of_watchers++,1===this._number_of_watchers?(r.CDOStartEventMonitoring(),e=this._handle_event,this._interval_id=setInterval(function(){return r.CDOGetAndClearEvents(function(t){var n,r,o,i,s;if(t.error)return void u("Error in response from ClientBridge.CDOGetAndClearEvents",{tags:["classic_desktop_onboarding"]});for(i=t.result,s=[],r=0,o=i.length;o>r;r++)n=i[r],s.push(e(n));return s})},1e3)):void 0},e.stop=function(){return this._number_of_watchers--,0===this._number_of_watchers?(r.CDOStopEventMonitoring(),clearInterval(this._interval_id),this._interval_id=null):void 0},e}(),{ActionTypes:i,FluxWebOnlineAjax:l,CDOClientEventMonitor:s}})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};define("modules/clean/react/client/classic_onboarding/tray",["external/react","modules/clean/flux/store_mixin","modules/clean/react/client/classic_onboarding/components","modules/clean/react/client/classic_onboarding/content","modules/clean/react/client/components/components","modules/clean/react/client/classic_onboarding/constants","modules/clean/react/client/classic_onboarding/services","modules/clean/react/client/classic_onboarding/actions_store","modules/clean/react/css","modules/clean/react/dbimg","modules/clean/static_urls","modules/core/i18n","external/classnames","external/underscore","external/react_intl_tel_input/libphonenumber","external/react_intl_tel_input/react_intl_tel_input","external/timeout_transition_group","modules/core/browser"],function(t,n,r,o,i,s,a,c,l,m,u,p,d,_,h,f,g,E){var b,y,T,v,S,N,C,O,I,P,D,A,x,R,L,w,k,F,M,B,H,V,U,j,q,W,G,Y,K,J,z,Q,X,Z,$,ee,te,ne,re,oe,ie,se,ae,ce,le,me,ue,pe,de,_e,he;return X=r.PreloadImageAssetsWrapper,G=r.MediaObject,ne=r.SteppedProgressBar,R=o.Content,x=i.ClientBridgeMixin,v=s.CDOScreenTypes,O=s.CDOTutorialTypes,U=a.FluxWebOnlineAjax,S=c.CDOStore,b=c.CDOActions,_e=u.static_url,ie=p._,le=t.DOM,ce=t.createElement,de=t.PropTypes,se=de.any,me=de.func,he=de.string,pe=de.object,ae=de.bool,ue=de.number,Z=t.addons.PureRenderMixin,$=t.addons.CSSTransitionGroup,H=["see_files_on_phone_icon_src","share_file_link_icon_src","create_shared_folder_icon_src"],W="/static/javascript/external/react_intl_tel_input/libphonenumber-vfltafjCL.js",I=t.createClass({displayName:"ClassicOnboardingTrayController",mixins:[x,Z,n(S)],propTypes:{assetPaths:pe,dbimgCache:pe.isRequired,onboarding_session_id:he,countryCode:he,userData:pe},_get_state_from_stores:function(){return{currentScreenType:S.currentScreenType()}},componentWillMount:function(){return b.setAssetPaths(this.props.assetPaths),b.setCountryCode(this.props.countryCode),b.setDBImgCache(this.props.dbimgCache),b.setOnboardingSessionId(this.props.onboarding_session_id),b.setUserData(this.props.userData),b.adjustTrayHeightForScreen()},componentDidMount:function(){return this._dupeListener=b.watchForDupesIfTestMode()},componentWillUnmount:function(){return this._dupeListener()},_getBlockingAndLazyImagePaths:function(){var t,n,r,o;return t=Object.keys(this.props.assetPaths),n=t.filter(function(t){return e.call(H,t)>=0}).map(function(e){return function(t){return e.props.assetPaths[t]}}(this)),r=t.map(function(e){return function(t){return e.props.assetPaths[t]}}(this)).filter(function(t){return e.call(n,t)<0}),o=function(e){return _e("/static/images/"+e)},n=n.map(o),r=r.map(o),{blocking_paths:n,lazy_paths:r}},render:function(){var e;return e=this._getBlockingAndLazyImagePaths(),ce(X,{blockingSrcList:e.blocking_paths,lazySrcList:e.lazy_paths,retryOnLoadFailure:!0},ce(D,{screenType:this.state.currentScreenType}))}}),D=t.createClass({displayName:"ClassicOnboardingTrayView",mixins:[Z],propTypes:{screenType:he},_renderScreen:function(){var e;switch(e=this.props.screenType){case v.TABLE_OF_CONTENTS:return ce(re,{key:"table_of_contents"});case v.ONBOARDING_SKIPPED:return ce(J,{key:"onboarding_skipped"});case v.ONBOARDING_FINISHED:return ce(K,{key:"onboarding_finished"});case v.INSTALL_APP_MOVE_FILE_INTO_DROPBOX:return ce(Y,{key:"install_app_move_file_into_dropbox"});case v.COPY_LINK_MOVE_FILE_INTO_DROPBOX:return ce(Y,{key:"copy_link_move_file_into_dropbox"});case v.INSTALL_MOBILE_APP:return ce(j,{key:"install_mobile_app"});case v.POST_INSTALL_MOBILE_APP:return ce(Q,{key:"post_install_mobile_app"});case v.COPY_FILE_LINK:return ce(k,{key:"copy_file_link"});case v.CREATE_SUB_FOLDER:return ce(F,{key:"create_sub_folder"});case v.SHARE_FOLDER:return ce(ee,{key:"share_folder"});case v.SHARE_FOLDER_VERIFY_EMAIL:return ce(ee,{shareAttempted:!0,key:"share_folder"});case v.POST_FILE_LINK_COPIED:return ce(z,{key:"post_file_link_copied"});case v.INVITE_TO_FOLDER:return ce(q,{key:"invite_to_folder"})}},render:function(){return le.div({className:"cdo-tray"},ce(N),ce(g,{transitionName:"ScreenSlide",enterTimeout:500,leaveTimeout:300},this._renderScreen()),ce(C))}}),re=t.createClass({displayName:"TableOfContentsView",mixins:[Z],render:function(){var e;return e=R.get("see_files_on_phone_heading"),S.experimentVersion()>=2&&S.recentMobileActivity()&&S.hasUserAddedFile()&&(e=R.get("get_to_my_files_heading")),le.div({className:d({"cdo-screen":!0,toc:!0})},le.div({className:"toc__section-header"},R.get("toc_header")),ce(w,{},ce(L,{className:"content-link--see-files",title:e,description:R.get("see_files_on_phone_info"),tutorialType:O.SEE_FILES_ON_PHONE,iconSrc:S.assetPath("see_files_on_phone_icon_src")}),ce(L,{className:"content-link--share-file",title:R.get("share_file_heading"),description:R.get("share_file_info"),tutorialType:O.SHARE_FILE_LINK,iconSrc:S.assetPath("share_file_link_icon_src")}),ce(L,{className:"content-link--share-folder",title:R.get("create_shared_folder_heading"),description:R.get("create_shared_folder_info"),tutorialType:O.CREATE_SHARED_FOLDER,iconSrc:S.assetPath("create_shared_folder_icon_src")})),ce(te))}}),w=t.createClass({displayName:"ContentLinkGroup",mixins:[Z],render:function(){return le.div({className:"content-link-group"},this.props.children)}}),L=t.createClass({displayName:"ContentLink",mixins:[Z,n(S)],propTypes:{title:se,description:se,tutorialType:he,iconSrc:he,className:he},_get_state_from_stores:function(){return{visitedTutorials:S.completedTutorialTypes()}},_handleClick:function(){return b.startTutorial(this.props.tutorialType)},render:function(){var e,t;return t=this.state.visitedTutorials.has(this.props.tutorialType),le.button({className:d((e={"content-link":!0,"content-link--visited":t},e[""+this.props.className]=!0,e)),onClick:this._handleClick},ce(m,{className:"content-link__icon",imgSrcCache:S.dbImgCache(),src:this.props.iconSrc}),le.span({className:"content-link__content"},le.em({className:"content-link__title"},this.props.title),le.span({className:"content-link__description"},this.props.description)))}}),te=t.createClass({displayName:"SkipFlowButton",mixins:[Z],_skipTutorial:function(){return b.reportEvent("onboarding_skipped"),b.changeScreen(v.ONBOARDING_SKIPPED)},render:function(){return le.div({className:"skip-flow"},le.button({className:"skip-flow__button",onClick:this._skipTutorial},R.get("skip_onboarding_button_text")))}}),Y=t.createClass({displayName:"MoveFileIntoDropboxView",mixins:[Z],componentDidMount:function(){return setTimeout(b.openDBFolder,800),setTimeout(b.openDocumentsFolder,1100),this._fileAddListener=b.watchForEvent()},componentWillUnmount:function(){return this._fileAddListener()},render:function(){return le.div({className:"move-file cdo-screen cdo-screen--tutorial"},ce(G,{imgSrc:S.assetPath("move_file_icon_src"),dbImgCache:S.dbImgCache()},le.p({className:"cdo-screen__body"},R.get("move_file_instruction"))),ce(B))}}),j=t.createClass({displayName:"InstallMobileAppView",mixins:[Z],_afterSendTextHandler:function(){return b.changeScreen(v.POST_INSTALL_MOBILE_APP)},render:function(){return le.div({className:"install-app cdo-screen cdo-screen--tutorial"},ce(G,{imgSrc:S.assetPath("install_app_icon_src"),dbImgCache:S.dbImgCache()},le.p({className:"install-app__body"},le.span({className:"install-app__heading"},R.get("install_app_instruction_heading")),le.span({className:"install-app__subheading"},R.get("install_app_instruction_subheading"))),ce(oe,{buttonText:R.get("install_app_button_text"),sendInProgressButtonText:R.get("send_in_progress_button_text"),afterTextSentCallback:this._afterSendTextHandler})),ce(B))}}),T=t.createClass({displayName:"CDOIntlTelInput",mixins:[Z,n(S)],_get_state_from_stores:function(){return{countryCode:S.countryCode()}},propTypes:{onPhoneNumberChange:me,focusAfterLoad:ae,focusWaitMS:ue},defaultCountryCode:"us",getDefaultProps:function(){return{focusAfterLoad:!1,focusWaitMS:800}},getInitialState:function(){return{showingDropdown:!1}},componentDidMount:function(){return document.addEventListener("click",this._handleDocumentBodyClick),this.props.focusAfterLoad?this._input_focus_timeout_id=setTimeout(function(e){return function(){return e.refs.intlTelInput.refs.telInput.getDOMNode().focus()}}(this),this.props.focusWaitMS):void 0},componentWillUnmount:function(){return clearTimeout(this._input_focus_timeout_id),document.removeEventListener("click",this._handleDocumentBodyClick)},_handleDocumentBodyClick:function(e){var t,n,r,o;return t=e.target,n=this.getDOMNode().querySelector(".selected-flag"),r=t===n||n.contains(t),o=!this.refs.intlTelInput.state.countryList.showDropdown,r&&!o?(b.reportEvent("select_country_clicked"),this.setState({showingDropdown:!0})):o&&!r?this.setState({showingDropdown:!1}):void 0},render:function(){var e;return e=this.state.showingDropdown,le.div({className:"cdo-intl-tel-input"},e?le.p({className:"cdo-intl-tel-input__dropdown-heading"},R.get("telephone_input_dropdown_heading"),le.button({className:"cdo-intl-tel-input__close-button"})):void 0,ce(f,{ref:"intlTelInput",css:["intl-tel-input","form-control"],defaultCountry:this.state.countryCode,utilsScript:W,onPhoneNumberChange:this.props.onPhoneNumberChange}))}}),oe=t.createClass({displayName:"TextPhoneMobileAppForm",mixins:[Z],propTypes:{buttonText:se,sendInProgressButtonText:se,afterTextSentCallback:me},getInitialState:function(){return{numberIsValid:!1,currentPhoneNumber:{},sendInProgress:!1,formSubmitAttempted:!1,sendError:!1}},_handlePhoneNumberChange:function(e,t,n,r){var o,i,s;return i=n.dialCode,o="+"+i,s=r.replace(o,""),this.setState({formSubmitAttempted:!1,numberIsValid:e,currentPhoneNumber:{phoneNumber:s,countryCode:o}}),this._phone_number_changed?void 0:(this._phone_number_changed=!0,b.reportEvent("phone_number_typed"))},_handleFormSubmit:function(e){var t;return e.preventDefault(),b.reportEvent("text_me_a_link_clicked"),this.setState({formSubmitAttempted:!0,sendError:!1}),this.state.numberIsValid?(this.setState({sendInProgress:!0}),t=this.state.currentPhoneNumber,U.request({url:"/text_mobile_app",data:{phone_number:t.phoneNumber,country_code:t.countryCode}}).then(function(e){return function(){return e.setState({sendInProgress:!1,formSubmitAttempted:!1}),b.reportEvent("text_sent"),e.props.afterTextSentCallback()}}(this)).catch(function(e){return function(){return e.setState({sendInProgress:!1,sendError:!0,formSubmitAttempted:!1}),b.reportEvent("send_error")}}(this))):void b.reportEvent("phone_number_invalid")},render:function(){return le.div({className:"mobile-app-link"},le.form({className:"mobile-app-link__form",onSubmit:this._handleFormSubmit},ce(T,{onPhoneNumberChange:this._handlePhoneNumberChange,focusAfterLoad:!0}),le.div({className:"mobile-app-link__error"},this.state.formSubmitAttempted&&!this.state.numberIsValid?le.span({className:"mobile-app-link__error-msg mobile-app-link__error-msg--validation"},R.get("phone_number_invalid_error_message")):void 0,this.state.sendError?le.span({className:"mobile-app-link__error-msg mobile-app-link__error-msg--sending"},R.get("send_text_error_message")):void 0),le.button({className:d({"button-primary":!0,"install-app-button":!0,"install-app-button--sending":this.state.sendInProgress})},this.state.sendInProgress?this.props.sendInProgressButtonText:this.props.buttonText)))}}),Q=t.createClass({displayName:"PostInstallMobileAppView",mixins:[Z],render:function(){var e;return e=S.experimentVersion()>=2&&S.recentMobileActivity()?R.get("open_app_to_see_files"):R.get("after_app_text_message"),le.div({className:"post-install cdo-screen cdo-screen--tutorial"},ce(G,{imgSrc:S.assetPath("app_installed_icon_source"),dbImgCache:S.dbImgCache()},le.p({className:"cdo-screen__body"},e),ce(V,{tutorialType:O.SEE_FILES_ON_PHONE})))}}),k=t.createClass({displayName:"CopyFileLinkView",mixins:[Z],componentDidMount:function(){return setTimeout(b.openDBFolder,800),this._fileLinkCopiedListener=b.watchForEvent()},componentWillUnmount:function(){return this._fileLinkCopiedListener()},render:function(){return le.div({className:"copy-link cdo-screen cdo-screen--tutorial"},ce(G,{imgSrc:S.assetPath("copy_link_icon_src"),dbImgCache:S.dbImgCache()},le.p({className:"cdo-screen__body"},R.get("copy_link_instruction"))),ce(B))}}),z=t.createClass({displayName:"PostFileLinkCopiedView",mixins:[Z],render:function(){return le.div({className:"post-copy cdo-screen cdo-screen--tutorial"},ce(G,{imgSrc:S.assetPath("link_copied_icon_src"),dbImgCache:S.dbImgCache()},le.p({className:"cdo-screen__body"},R.get("after_link_copy_message")),ce(V,{tutorialType:O.SHARE_FILE_LINK})))}}),V=t.createClass({displayName:"FinishTutorialButton",mixins:[Z],propTypes:{tutorialType:he},_handleButtonClick:function(){return b.markTutorialDone(this.props.tutorialType)},render:function(){return le.button({className:"finish-tutorial-button",onClick:this._handleButtonClick},R.get("finish_tutorial_button_text"))}}),M=t.createClass({displayName:"EndOnboardingButton",mixins:[Z],_handleButtonClick:function(){return b.reportEvent("end_onboarding"),b.endOnboarding()},render:function(){return le.button({className:"end-onboarding-button",onClick:this._handleButtonClick},R.get("end_onboarding_button_text"))}}),B=t.createClass({displayName:"ExitTutorialButton",mixins:[Z],_handleButtonClick:function(){return b.abandonTutorial()},render:function(){return le.button({className:"exit-tutorial-button",onClick:this._handleButtonClick},R.get("exit_tutorial_button_text"))}}),F=t.createClass({displayName:"CreateSubFolderView",mixins:[Z],componentDidMount:function(){return setTimeout(b.openDBFolder,800),this._folderCreatedListener=b.watchForEvent()},componentWillUnmount:function(){return this._folderCreatedListener()},render:function(){return le.div({className:"create-folder cdo-screen cdo-screen--tutorial"},ce(G,{imgSrc:S.assetPath("create_folder_icon_src"),dbImgCache:S.dbImgCache()},le.p({className:"cdo-screen__body"},R.get("create_folder_instruction"))),ce(B))}}),ee=t.createClass({displayName:"ShareFolderView",mixins:[Z,n(S)],propTypes:{shareAttempted:ae},_get_state_from_stores:function(){return{waitingForEmailVerify:S.waitingForEmailVerify()}},componentDidMount:function(){return this._folderSharedListener=b.watchForEvent(),b.waitVerifyByEmail()},componentWillUnmount:function(){return this._folderSharedListener(),b.stopWaitVerifyByEmail()},render:function(){var e;return e=this.state.waitingForEmailVerify&&this.props.shareAttempted,le.div({className:"share-folder cdo-screen cdo-screen--tutorial"},ce(G,{imgSrc:S.assetPath("share_folder_icon_src"),dbImgCache:S.dbImgCache()},le.p({className:"cdo-screen__body"},R.get("share_folder_instruction")),le.div({className:"share-folder__verify"},ce($,{transitionName:"FadeIn",transitionAppear:!0,transitionEnterTimeout:300,transitionLeaveTimeout:300},e?le.p({className:"share-folder__verify-message"},R.get("verify_email_message")):void 0))),ce(B))}}),q=t.createClass({displayName:"InviteToFolderView",mixins:[Z],componentDidMount:function(){return this._folderSharedListener=b.watchForEvent()},componentWillUnmount:function(){return this._folderSharedListener()},render:function(){return le.div({className:"invite-folder cdo-screen cdo-screen--tutorial"},ce(G,{imgSrc:S.assetPath("folder_shared_icon_src"),dbImgCache:S.dbImgCache()},le.p({className:"cdo-screen__body"},R.get("invite_to_sf_instruction")),ce(V,{tutorialType:O.CREATE_SHARED_FOLDER})))}}),J=t.createClass({displayName:"OnboardingSkippedView",mixins:[Z],render:function(){return le.div({className:"onboarding-skipped cdo-screen cdo-screen--tutorial"},ce(G,{imgSrc:S.assetPath("restart_onboarding_icon_src"),dbImgCache:S.dbImgCache()},le.p({className:"cdo-screen__body"},R.get("onboarding_skipped_message")),ce(M)))}}),K=t.createClass({displayName:"OnboardingFinishedView",mixins:[Z],render:function(){return le.div({className:"onboarding-finished cdo-screen cdo-screen--tutorial"},le.div({className:"onboarding-finished__figure"},ce(m,{className:"onboarding-finished__img",imgSrcCache:S.dbImgCache(),src:S.assetPath("onboarding_complete_icon_src")}),le.p({className:"cdo-screen__body"},R.get("onboarding_finished_message")),ce(M)))}}),C=t.createClass({displayName:"CDOTutorialProgressBar",mixins:[Z,n(S)],propTypes:{screenType:he},_get_state_from_stores:function(){return{currentTutorialProgress:S.currentTutorialProgress(),shouldDisplay:S.shouldDisplayProgressBar()}},render:function(){var e;return e=this.state.currentTutorialProgress||{numSections:1,numComplete:0},ce(ne,{numSections:e.numSections,numComplete:e.numComplete,shouldDisplay:this.state.shouldDisplay})}}),N=t.createClass({displayName:"CDOToastBar",mixins:[Z,n(S)],_get_state_from_stores:function(){return{webIsOnline:S.webIsOnline()}},_shouldDisableUI:function(){return!this.state.webIsOnline},render:function(){return le.div({className:"toast-bar"},ce($,{transitionName:"SlideDown",transitionAppear:!0,transitionEnterTimeout:300,transitionLeaveTimeout:300},this.state.webIsOnline?void 0:le.div({className:"toast-bar__bar"},R.get("no_online_connection_error_msg"))),ce($,{transitionName:"FadeIn",transitionAppear:!0,transitionEnterTimeout:300,transitionLeaveTimeout:300},this._shouldDisableUI()?le.div({className:"toast-bar__overlay"}):void 0))}}),y=t.createClass({displayName:"CDOCssLoadFailedView",handleReloadClick:function(){return b.reportEvent("css_load_failed"),E.reload()},render:function(){return le.button({style:{display:"none"},onClick:this.handleReloadClick},"(Placeholder Error) Reload Page")}}),P=l(I,["/static/css/client/classic_onboarding/react_intl_tel_input/intlTelInput-vflvT4SqR.css","/static/css/client/classic_onboarding/tray-vflnhLi9E.css"]),A=t.createClass({displayName:"ClassicOnboardingWithCssRefetch",render:function(){return t.createElement(P,_.extend({},this.props,{cssPlaceholder:ce(y),onCssFail:function(){}}))}})})}.call(this),function(){define("modules/clean/react/client/components/components",["modules/clean/server_side_client_view_bridge"],function(e){var t;return t={displayName:"ClientBridgeMixin",componentWillMount:function(){return e.init()}},{ClientBridgeMixin:t}})}.call(this),function(){define("modules/clean/react/dbimg",["external/react","external/underscore","jquery","modules/clean/hi_res","modules/clean/sprite","modules/core/exception"],function(e,t,n,r,o,i){var s,a,c,l,m,u,p,d;return a=i.assert,c=e.DOM,s=e.PropTypes,d=function(e){return e&&0===e.indexOf("sprites/")},m=/((.*)((\.gif)|(\.png)))?$/,u=function(e){var t,n,r,o,i,s;return a(d(e),"Not a sprited image: "+e),i=e.split("/"),a(i.length>2,"Malformed sprite url: "+e),r=i[i.length-1],s=m.exec(r),t=s[0],o=s[1],n=s[2],n&&o&&(i[i.length-1]=o),[i[1],i.slice(2).join("/")]},p=function(e){return!(0===e.indexOf("/")||0===e.indexOf("http:")||0===e.indexOf("https:"))},l=e.createClass({displayName:"dbimg",propTypes:{alt:s.string,src:s.string.isRequired,lazyLoad:s.string,height:s.string,ismap:s.string,longdesc:s.string,usemap:s.string,vspace:s.string,width:s.string,forceNonSprite:s.bool,localized:s.bool,noResize:s.bool,imgSrcCache:s.object.isRequired},render:function(){var n,r,i,s,l,m,_,h,f,g;return g=this.props.src,l=this.props.lazyLoad,a(g||l,"no source or lazy load path is specified"),!this.props.forceNonSprite&&d(g)?(m=u(g),r=m[0],f=m[1],h=t.extend({},this.props,{group:r,src:f}),i=e.createElement(o,h)):(s=t.extend({},this.props),!l&&p(g)&&(n=this.props.localized?this.props.imgSrcCache[g].localized:this.props.imgSrcCache[g],_=n.retina,_&&(s["data-hi-res"]=_),this.props.noResize&&(s["data-hi-res-noresize"]=!0),g=n.static),s.src=g,l&&p(l)&&(l=this.props.localized?this.props.imgSrcCache[l].localized.static:this.props.imgSrcCache[l].static,s["data-src"]=l),i=c.img(s)),i},componentDidMount:function(){return new r(n(this.getDOMNode()))}})})}.call(this),function(){define("modules/clean/react/dbox_app_promo",["external/react","jquery","modules/core/browser","modules/core/i18n","modules/clean/react/button","modules/clean/react/image","modules/clean/static_urls"],function(e,t,n,r,o,i,s){var a,c,l,m,u,p,d,_,h,f,g,E,b,y,T,v;return f=r._,v=s.static_url,b=e.addons.classSet,g=e.createElement,y=e.DOM,T=e.PropTypes,E=e.addons.cloneWithProps,h=e.addons.CSSTransitionGroup,l=e.createClass({displayName:"DboxAppPromo",propTypes:{title:T.string,className:T.string},render:function(){var e;return e={"dbox-app-promo-container":!0},this.props.className&&(e[this.props.className]=!0),y.div({className:b(e)},y.div({className:"dbox-app-promo-title"},this.props.title),y.div({className:"dbox-app-promo"},this.props.children))}}),a=e.createClass({displayName:"Actionable",propTypes:{handler:T.func,progressMapper:T.func},getDefaultProps:function(){return{handler:function(){},progressMapper:function(e,t){return{disabled:e||t.disabled}}}},getInitialState:function(){return{inProgress:!1}},onClick:function(){var e,t;if(!this.state.inProgress)return t="function"==typeof(e=this.props).handler?e.handler():void 0,t&&"function"==typeof t.complete?(this.setState({inProgress:!0}),t.complete(function(e){return function(){return e.isMounted()?e.setState({inProgress:!1}):void 0}}(this))):void 0},render:function(){var t,n,r,o,i;n={},r=this.props;for(t in r)i=r[t],"handler"!==t&&"children"!==t&&"progressMapper"!==t&&(n[t]=i);n.onClick=this.onClick,n.inProgress=this.state.inProgress,o=this.props.progressMapper(this.state.inProgress,n);for(t in o)i=o[t],n[t]=i;return E(e.Children.only(this.props.children),n)}}),m=e.createClass({displayName:"DboxAppPromoBanner",propTypes:{title:T.string,description:T.string,buttons:T.arrayOf(T.shape({text:T.string,handler:T.func}))},render:function(){var e,t;return y.div({className:"dbox-app-promo-banner"},y.div({className:"dbox-app-promo-banner-body"},y.div({className:"dbox-app-promo-banner-title"},this.props.title),y.div({className:"dbox-app-promo-banner-description"},this.props.description)),y.div({className:"dbox-app-promo-banner-buttons"},function(){var n,r,i,s;for(i=this.props.buttons,s=[],t=n=0,r=i.length;r>n;t=++n)e=i[t],s.push(y.span({className:"dbox-app-promo-banner-button",key:"button-"+t},g(a,{handler:e.handler},g(o.button,{importance:"tertiary"},e.text))));return s}.call(this)),y.div({className:"clear"}))}}),p=e.createClass({displayName:"DboxAppPromoHeader",propTypes:{title:T.string,text:T.string,rightComponent:T.element,primaryButtonText:T.string,primaryButtonHandler:T.func,primaryButtonDisabled:T.bool,primaryElement:T.element,otherButtons:T.arrayOf(T.shape({text:T.string,handler:T.func})),reversePrimaryButton:T.bool,calloutBanner:T.shape({title:T.string,description:T.string,buttons:T.arrayOf(T.shape({text:T.string,handler:T.func})),positionBelowTitle:T.bool})},renderPrimaryAction:function(){return this.props.primaryElement?this.props.primaryElement:this.props.primaryButtonText&&this.props.primaryButtonHandler?g(a,{handler:this.props.primaryButtonHandler,disabled:this.props.primaryButtonDisabled},g(o.button,{importance:"primary"},this.props.primaryButtonText)):void 0},render:function(){var e,t;return e={"dbox-app-promo-header":!0,clearfix:!0},this.props.className&&(e[this.props.className]=!0),y.div({className:b(e)},g(h,{transitionName:"dbox-app-promo-banner"},this.props.calloutBanner&&!this.props.calloutBanner.positionBelowTitle?g(m,this.props.calloutBanner):void 0),y.div({className:"dbox-app-promo-header-body"},this.props.rightComponent?y.div("right-component",y.div({className:"dbox-app-promo-header-right-component"},this.props.rightComponent)):void 0,y.div({className:"dbox-app-promo-header-text"},y.div({className:"dbox-app-promo-header-h1"},this.props.title),y.div({className:"dbox-app-promo-header-h2"},this.props.text)),g(h,{transitionName:"dbox-app-promo-banner"},this.props.calloutBanner&&this.props.calloutBanner.positionBelowTitle?g(m,this.props.calloutBanner):void 0),y.div({className:"dbox-app-promo-cta"},this.props.reversePrimaryButton?void 0:this.renderPrimaryAction(),function(){var e,n,r,i;if(this.props.otherButtons){for(r=this.props.otherButtons,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(g(a,{handler:t.handler,disabled:t.disabled},g(o.button,{className:"banner-button",importance:"tertiary"},t.text)));return i}}.call(this),this.props.reversePrimaryButton?this.renderPrimaryAction():void 0),y.div({className:"dbox-app-promo-more-content"},this.props.children)))}}),u=e.createClass({displayName:"DboxAppPromoGrid",propTypes:{columns:T.arrayOf(T.shape({title:T.string,text:T.string,imageSource:T.string,imageSourceHiRes:T.string}))},getDefaultProps:function(){return{columns:[]}},render:function(){var e;return y.div({className:"dbox-app-promo-3pane"},y.div({className:"dbox-app-promo-grid"},function(){var t,n,r,o;for(r=this.props.columns,o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(y.div({className:"dbox-app-promo-grid-column"},e.imageSource&&e.imageSourceHiRes?y.div({className:"pane-image"},g(i,{src:v(e.imageSource),srcHiRes:v(e.imageSourceHiRes)})):void 0,e.title?y.div({className:"pane-title"},e.title):void 0,y.div({className:"pane-text"},e.text)));return o}.call(this)))}}),d=e.createClass({displayName:"DboxAppPromoImageText",propTypes:{imageSource:T.string,imageSourceHiRes:T.string,title:T.string,text:T.string,isImagePrimary:T.bool},getDefaultProps:function(){return{isImagePrimary:!0}},render:function(){var e,t;return t=b({"dbox-app-promo-image-text-pane":!0,"dbox-app-promo-image-text-image-pane":!0,"primary-position":this.props.isImagePrimary,"secondary-position":!this.props.isImagePrimary}),e=b({"dbox-app-promo-image-text-pane":!0,"dbox-app-promo-image-text-content-pane":!0,"primary-position":!this.props.isImagePrimary,"secondary-position":this.props.isImagePrimary}),y.div({className:"dbox-app-promo-image-text"},y.div({className:t},g(i,{src:v(this.props.imageSource),srcHiRes:v(this.props.imageSourceHiRes)})),y.div({className:e},y.div({className:"dbox-app-promo-image-text-title"},this.props.title),y.div({className:"dbox-app-promo-image-text-text"},this.props.text,this.props.children)),y.div({className:"clear"}))}},c=e.createClass({displayName:"DboxAppFeatureList",propTypes:{items:T.arrayOf(T.shape({imageSource:T.string,imageSourceHiRes:T.string,title:T.string,description:T.string}))},render:function(){var e;return y.ul({className:"dbox-app-promo-feature-list"},function(){var t,n,r,o;for(r=this.props.items,o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(y.li({className:"dbox-app-promo-feature-item"},y.div({className:"dbox-app-promo-feature-title"},y.span({className:"dbox-app-promo-feature-bullet"},g(i,{src:v(e.imageSource),srcHiRes:v(e.imageSourceHiRes)})),y.span({className:"dbox-app-promo-feature-title-text"},e.title)),y.div({className:"dbox-app-promo-feature-description"},e.description)));return o}.call(this))}}),_=e.createClass({displayName:"DboxAppPromoSection",propTypes:{className:T.string},render:function(){return y.div({className:b(this.props.className,"dbox-app-promo-section")},this.props.children)}})),{Actionable:a,DboxAppPromo:l,DboxAppPromoBanner:m,DboxAppPromoHeader:p,DboxAppPromoGrid:u,DboxAppPromoImageText:d,DboxAppFeatureList:c,DboxAppPromoSection:_}})}.call(this),function(){define("modules/clean/react/lightbox_video_modal",["external/react","jquery","modules/core/i18n","modules/core/notify","modules/clean/react/modal","modules/clean/video_util"],function(e,t,n,r,o,i){var s,a,c,l,m,u;return c=n._,a=o.Modal,m=e.DOM,u=e.PropTypes,l=e.addons.classSet,s=e.createClass({propTypes:{embed_src:u.string,embed_poster:u.string,autoplay:u.bool,vimeo_id:u.string,size:u.shape({width:u.number,height:u.number})},getDefaultProps:function(){return{size:{width:600,height:375},autoplay:!0}},statics:{show_vimeo:function(t,n){return a.showInstance(e.createElement(s,{vimeo_id:t,size:n}))},show:function(t,n,r){return a.showInstance(e.createElement(s,{embed_src:t,embed_poster:n,size:r}))}},embedVideoUtil:function(){var e;return e=t(this.refs.lightboxVideoPlayer.getDOMNode()),this.player=i.embed(e,{src:this.props.embed_src,type:"video/mp4",width:e.width(),height:e.height(),controls:!0,preload:"auto",autoplay:this.props.autoplay,poster:this.props.embed_poster,onError:this.onVideoUtilError})},onVideoUtilError:function(){return r.error(c("Couldn’t load video"))},componentDidMount:function(){return this.props.embed_src?this.embedVideoUtil():void 0},renderVimeoVideoPlayer:function(){var e;return e="https://player.vimeo.com/video/"+this.props.vimeo_id+"?color=1c88d8&title=0&byline=0&autoplay="+this.props.autoplay,m.iframe({ref:"vimeoPlayer",src:e,width:this.props.size.width,height:this.props.size.height,frameborder:"0",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0,style:{
border:"none"}})},render:function(){return e.createElement(a,{className:"paper-promo-video-modal",style:"lightbox",width:this.props.size.width},m.div({className:"lightbox-video-modal-container"},m.div({ref:"lightboxVideoPlayer",className:"lightbox-video-modal-player",style:{width:this.props.size.width,height:this.props.size.height,"background-color":"#000"}},this.props.vimeo_id?this.renderVimeoVideoPlayer():void 0)))}})})}.call(this),function(){define("modules/clean/react/notes/notes_dbox_landing_page",["jquery","external/react","external/underscore","modules/core/browser","modules/core/notify","modules/core/uri","modules/clean/react/dbox_app_promo","modules/clean/react/lightbox_video_modal","modules/clean/react/modal","modules/clean/ajax","modules/clean/react/button","modules/clean/react/image","modules/clean/react/input","modules/clean/static_urls"],function(e,t,n,r,o,i,s,a,c,l,m,u,p,d){var _,h,f,g,E,b,y,T,v,S,N,C,O,I,P,D,A,x;return f=s.DboxAppPromo,g=s.DboxAppPromoGrid,E=s.DboxAppPromoImageText,h=s.DboxAppFeatureList,b=s.DboxAppPromoSection,T=c.Modal,x=d.static_url,D=t.DOM,A=t.PropTypes,P=t.createElement,O=t.addons.CSSTransitionGroup,y=t.addons.LinkedStateMixin,_=m.button,I=p.text,N=t.createClass({displayName:"NotesDboxLandingPage",propTypes:{cont:A.string,showGetStartedForm:A.bool},getInitialState:function(){return{tosAgree:!1,onWaitlist:this.props["on-waitlist"]}},componentDidMount:function(){return e(".notes-footer-container").css("display","block")},onVideoThumbnailClicked:function(e){return T.showInstance(t.createElement(a,{vimeo_id:"142162581",size:{width:800,height:498},autoplay:!0}))},onVideoUtilError:function(){return o.error("There was an error loading the video")},renderPromoBanner:function(){return D.div({className:"notes-signin-container get-started-banner"},D.div({className:"notes-signin-banner-container"},P(u,{className:"notes-signin-image-desktop",src:x("/static/images/notes/promo/paper-signin-background-desktop-vflcncM7A.png"),srcHiRes:x("/static/images/notes/promo/paper-signin-background-desktop@2x-vflPYxZIP.png")}),P(u,{className:"notes-signin-image-tablet",src:x("/static/images/notes/promo/paper-signin-background-tablet-vflPKvwBg.png"),srcHiRes:x("/static/images/notes/promo/paper-signin-background-tablet@2x-vflRKvN74.png")}),P(u,{className:"notes-signin-image-mobile",src:x("/static/images/notes/promo/paper-signin-background-mobile-vflXimrWr.png"),srcHiRes:x("/static/images/notes/promo/paper-signin-background-mobile@2x-vflqqegTi.png")})),D.div({className:"notes-signin-text-container u-trim-margin"},D.div({className:"notes-signin-text-title"},"Capture and build on ideas together"),D.div({className:"notes-signin-text-subtitle u-mar-bottom-l"},"Dropbox Paper beta is the best way for teams to create and work together.")),P(C,{autoFocus:!0}))},renderPromoContent:function(){return D.div({},D.div({className:"notes-promo-video-container"},D.div({className:"notes-promo-video-title"},"Watch how Paper brings teams together"),D.a({onClick:this.onVideoThumbnailClicked},u({className:"notes-promo-video-preview",src:x("/static/images/notes/promo/video_placeholder-vfl5rCrKq.png"),srcHiRes:x("/static/images/notes/promo/video_placeholder@2x-vfluz8HFq.png")}))),t.createElement(b,{className:"notes-more-than-words-section"},t.createElement(E,{title:"More than words",text:"Create the way you want, with what you want. Paper adapts to the way your team captures ideas.",imageSource:"/static/images/notes/promo/more_than_words-vflVIwe9Q.png",imageSourceHiRes:"/static/images/notes/promo/more_than_words@2x-vflVtPSgS.png",isImagePrimary:!0},t.createElement(h,{items:[{imageSource:"/static/images/notes/promo/embeds-vflVnfC0G.png",imageSourceHiRes:"/static/images/notes/promo/embeds@2x-vflOgaVXR.png",title:"Embeds",description:"Keep using the apps you love. Embed files from YouTube, Google, and of course, Dropbox."},{imageSource:"/static/images/notes/promo/task_list-vfl4jHXw6.png",imageSourceHiRes:"/static/images/notes/promo/task_list@2x-vflmEGbLO.png",title:"Task lists",description:"Make lists, even nested ones, to track tasks, big or small."},{imageSource:"/static/images/notes/promo/code-vfl1bUUDb.png",imageSourceHiRes:"/static/images/notes/promo/code@2x-vflmbhl4Y.png",title:"Code",description:"Auto formatting makes it simple to create with code blocks."}]}))),t.createElement(b,{className:"notes-collaborate-section"},t.createElement(E,{title:"Collaborate at the speed of thought",text:"Give and get fast feedback right where your ideas are created.",imageSource:"/static/images/notes/promo/collaborate_screenshot-vflaW9iG9.png",imageSourceHiRes:"/static/images/notes/promo/collaborate_screenshot@2x-vflbDV-KT.png",isImagePrimary:!0},t.createElement(h,{items:[{imageSource:"/static/images/notes/promo/share_instantly-vfln3OOdq.png",imageSourceHiRes:"/static/images/notes/promo/share_instantly@2x-vfl8sNF__.png",title:"Share instantly",description:"Send docs with just a click to whoever you choose—one person, your team, or your entire company."},{imageSource:"/static/images/notes/promo/iterate-vflsHRVWX.png",imageSourceHiRes:"/static/images/notes/promo/iterate@2x-vflKEfcec.png",title:"Iterate in real time",description:"Work with your team at the same time, in the same doc. See feedback and edits immediately."},{imageSource:"/static/images/notes/promo/comment-vfl2S5sm9.png",imageSourceHiRes:"/static/images/notes/promo/comment@2x-vflnAx73-.png",title:"Comment with style",description:"Share thoughts quickly with inline comments. Make it fun with stickers."}]}))),t.createElement(b,{className:"notes-all-in-one-place-section"},D.div({className:"notes-dbox-app-section-header-text"},D.div({className:"notes-dbox-app-section-title"},"Your team's ideas, all in one place")),t.createElement(g,{columns:[{title:"Folders",text:"Keep docs organized and searchable in team folders. Share them with anyone you choose, wherever they are.",imageSource:"/static/images/notes/promo/folder_faces-vflH466KI.png",imageSourceHiRes:"/static/images/notes/promo/folder_faces@2x-vfly8pOYE.png"},{title:"Search",text:"Easily and quickly track down exactly what you're looking for, or discover what other teams in your company are creating.",imageSource:"/static/images/notes/promo/search-vflV_upr4.png",imageSourceHiRes:"/static/images/notes/promo/search@2x-vflP78TDq.png"}]})),D.div({className:"notes-dbox-app-section-divider"}),t.createElement(b,{className:"notes-get-inspired-section"},D.div({className:"notes-dbox-app-section-header-text"},D.div({className:"notes-dbox-app-section-title"},"Get inspired"),D.div({className:"notes-dbox-app-section-text"},"Here's how Paper helps teams work together.")),t.createElement(g,{columns:[{title:"Document features",text:"Get everyone on the same page about functionality, workflows, and dependencies.",imageSource:"/static/images/notes/promo/example_note_1-vflw4NFz2.png",imageSourceHiRes:"/static/images/notes/promo/example_note_1@2x-vflugINmY.png"},{title:"Take meeting notes",text:"Create a template to make it easy to capture the details that come out of weekly syncs.",imageSource:"/static/images/notes/promo/example_note_2-vfl_1cF8f.png",imageSourceHiRes:"/static/images/notes/promo/example_note_2@2x-vfl9qpbBe.png"},{title:"Brainstorm ideas",text:"Tackle big ideas, together in the same doc, at the same time.",imageSource:"/static/images/notes/promo/example_note_3-vflCFfwlP.png",imageSourceHiRes:"/static/images/notes/promo/example_note_3@2x-vfltURrpW.png"}]})))},render:function(){return D.div({},this.props.showGetStartedForm?this.renderPromoBanner():void 0,t.createElement(f,{className:"notes-dbox-app-promo"},this.renderPromoContent(null)))}}),v=t.createClass({mixins:[y],displayName:"NotesAskForEmailForm",propTypes:{autoFocus:A.bool,ctaButtonText:A.string,onSuccess:A.func},getInitialState:function(){return{email:"",submitting:!1}},componentWillMount:function(){return this._emailInputId="email-input-"+Math.floor(1e9*Math.random())},componentDidMount:function(){return this.props.autoFocus?this._focusEmailInput():void 0},_focusEmailInput:function(){return e("#"+this._emailInputId).focus()},_onCTAClick:function(){return this.setState({submitting:!0}),l.WebRequest({url:"/paper/email_info",data:{email:this.state.email},success:function(e){return function(t){var n;return e.setState({errors:null}),t=JSON.parse(t),"function"==typeof(n=e.props).onSuccess?n.onSuccess(e.state.email,t.is_business_domain):void 0}}(this),error:function(e){return function(t,n,r){var i,s;try{e.setState({errors:JSON.parse(r)})}catch(e){i=e,o.error()}return e._focusEmailInput()}}(this),complete:function(e){return function(){return e.setState({submitting:!1})}}(this)})},_onKeyDown:function(e){return"Enter"===e.key?this._onCTAClick():void 0},_renderError:function(){var e;return P(O,{transitionName:"notes-ask-for-work-email-form-error"},(null!=(e=this.state.errors)?e.email:void 0)?D.div({className:"notes-ask-for-work-email-form-error"},this.state.errors.email.message_text||this.state.errors.email.message_html):void 0)},render:function(){return D.div({className:"notes-ask-for-work-email-form"},this._renderError(),P(I,{id:this._emailInputId,className:"u-mar-right-xs",placeholder:"name@company.com","disable-errors":!0,autoCorrect:!1,autoCapitalize:!1,spellCheck:!1,disabled:this.state.submitting,valueLink:this.linkState("email"),onKeyDown:this._onKeyDown}),P(_,{className:"u-trim-margin",variant:"big",onClick:this._onCTAClick,disabled:this.state.submitting},this.props.ctaButtonText))}}),C=t.createClass({displayName:"NotesGetStartedForm",propTypes:{autoFocus:A.bool},render:function(){return D.div({className:"notes-signin-form-container get-started-form"},P(v,{autoFocus:this.props.autoFocus,ctaButtonText:"Get started",onSuccess:function(e,t){return t?r.redirect(i({path:"/paper/register",query:{email:e}})):T.showInstance(P(S,{email:e}))}}))}}),S=t.createClass({displayName:"NotesConsumerDomainModal",propTypes:{email:A.string},getInitialState:function(){return{askForEmail:!1}},componentDidMount:function(){return e(".notes-consumer-domain-modal__cta").focus()},_onCTAClick:function(){return this.setState({askForEmail:!0})},_onSkipClick:function(){return r.redirect(i({path:"/paper/register",query:{email:this.props.email}}))},_renderIntro:function(){return D.div(null,D.div({className:"notes-consumer-domain-modal__title u-mar-bottom-s"},"Sign up with your work email"),D.div({className:"notes-consumer-domain-modal__content u-mar-bottom-xs"},D.span({className:"notes-consumer-domain-modal__content-email"},this.props.email)," looks like a personal email address. The best features in Dropbox Paper only work when you sign up with a work email address."),P(_,{className:"notes-consumer-domain-modal__cta u-mar-bottom-xs",variant:"big",onClick:this._onCTAClick},"Enter work email address"),D.div({className:"notes-consumer-domain-modal__skip-link",onClick:this._onSkipClick},"Continue with this email address"))},_renderAskForEmail:function(){return D.div(null,D.div({className:"notes-consumer-domain-modal__title u-mar-bottom-s"},"Sign up"),D.div({className:"notes-consumer-domain-modal__content u-mar-bottom-m"},"We’ll check and see if anyone else from your company is using Dropbox Paper."),D.div({className:"u-mar-bottom-s"},P(v,{autoFocus:!0,ctaButtonText:"Sign up",onSuccess:function(e,t){return r.redirect(i({path:"/paper/register",query:{email:e}}))}})))},render:function(){return P(T,{className:"notes-consumer-domain-modal",style:"clean",buttonComponent:D.div()},this.state.askForEmail?this._renderAskForEmail():this._renderIntro())}}),{NotesDboxLandingPage:N,NotesAskForEmailForm:v,NotesGetStartedForm:C,NotesConsumerDomainModal:S}})}.call(this),function(){define("modules/clean/teams/constants",["modules/core/i18n"],function(e){var t,n,r,o,i,s,a,c,l,m,u,p,d,_,h,f;return f=e._,i={ACTIVE:1,PENDING:2,ERROR:3,REMOVED:4,SUSPENDED:5},h={PENDING_TEAM_ADMIN:11100,PENDING_ACCOUNTS_ADMIN:11200,PENDING_SUPPORT_ADMIN:11300,PENDING_MEMBER:12e3,TEAM_ADMIN:21100,ACCOUNTS_ADMIN:21200,SUPPORT_ADMIN:21300,MEMBER:22e3,SUSPENDED:3e4,REMOVED:4e4},n={SUPER:0,USER_MANAGEMENT:1,HELPDESK:2,CUSTOM:3,LIMITED:4,NONE:-1},t={NONE:0,UPLOAD_MODAL:1,TEAM_TAB_TOOLTIP:2,INVITATION_TOOLTIP:3,GROUP_TAB_TOOLTIP:4,SETTINGS_TOOLTIP:5,PAPER_TAB_TOOLTIP:6,DONE:1e3,UPLOADED_FILE:1001},r={0:f("Team Admin"),1:f("User Management Admin"),2:f("Support Admin"),3:f("Custom Admin"),4:f("Limited Admin")},c={NONE:0,LIMITED_TEAM_ADMIN:1,CDM_MVE_ADMIN:2,CDM_MVE_USER:3},d={FULL:0,FREE:1},_={},_[d.FREE]=f("Limited"),_[d.FULL]=f("Full"),p={DISCOVERY_DISABLED:1,CAN_AUTO_JOIN:3,APPROVAL_REQUIRED:4,WAITING_FOR_APPROVAL:5,REQUEST_APPROVED:6,REQUEST_REJECTED_OPEN:7,REQUEST_REJECTED_DISMISSED:8},o={PENDING:1,APPROVED:2,REJECTED:3},m={REQUIRE_APPROVAL:0,AUTO_ACCEPT:1,DISABLED:2},l={FOR_USER:0,FOR_ADMIN:1},a={TEAM:0,PUBLIC:1},s={},s[a.TEAM]=f("Just people on my team with the link"),s[a.PUBLIC]=f("Anyone with the link"),u={EXISTING_TEAM:0,PROVISION:10,TEAM_FOLDER:20,FINISHING_UP:30,COMPLETED:100},{JOIN_STATES:i,USER_TYPES:h,ADMIN_ROLE:n,ADMIN_ROLE_NAMES:r,ADMIN_ONBOARDING_STATES:t,TEAM_MEMBERSHIP_TYPES:d,TEAM_MEMBERSHIP_TYPE_LABELS:_,TEAM_JOIN_REQUEST_STATE:p,JOIN_REQUEST_STATUS:o,REQUEST_MEMBERSHIP_POLICY_VALUES:m,REQUEST_MEMBERSHIP_POLICY_LABEL_VARIANTS:l,NOTES_LINK_POLICY_VALUES:a,NOTES_LINK_POLICY_LABELS:s,ONBOARDING_TYPES:c,SETUP_WIZARD_STEP:u}})}.call(this),function(){define("modules/clean/teams/dbox_app_team_promo_grid",["external/react","modules/clean/react/dbimg"],function(e,t){var n,r,o;return r=e.DOM,o=e.PropTypes,n=e.createClass({displayName:"DboxAppTeamPromoGrid",propTypes:{columns:o.arrayOf(o.shape({title:o.string,imageSource:o.string,text:o.string,altText:o.string})),dbimgCache:o.object},getDefaultProps:function(){return{columns:[]}},render:function(){var n,o;return r.div({className:"dbox-app-promo-3pane"},r.div({className:"grid"},function(){var i,s,a,c;for(a=this.props.columns,c=[],o=i=0,s=a.length;s>i;o=++i)n=a[o],c.push(r.div({className:"grid__col grid__col--1-of-3",key:"col"+o},r.div({className:"pane-title"},n.title),e.createElement(t,{className:"pane-image",alt:n.altText,src:n.imageSource,imgSrcCache:this.props.dbimgCache,localized:!0}),r.div({className:"pane-text"},n.text)));return c}.call(this)))}})})}.call(this),function(){define("modules/clean/teams/limited_team_create_modal",["jquery","external/react","modules/core/browser","modules/core/i18n","modules/core/notify","modules/clean/analytics","modules/clean/ajax","modules/clean/react/button","modules/clean/react/modal","modules/clean/react/input","modules/clean/teams/constants","modules/clean/teams/limited_team_invite_form","modules/clean/teams/new_limited_team_create_form","modules/clean/teams/request_membership_policy_select","modules/clean/viewer","modules/clean/contacts/data","modules/clean/contacts/types"],function(e,t,n,r,o,i,s,a,c,l,m,u,p,d,_,h,f){var g,E,b,y,T,v,S,N,C,O,I,P,D,A,x;return C=i.TeamsWebActionsLogger,T=c.Modal,S=m.REQUEST_MEMBERSHIP_POLICY_VALUES,v=m.REQUEST_MEMBERSHIP_POLICY_LABEL_VARIANTS,E=h.Contact,P=t.DOM,I=t.addons.classSet,A=t.PropTypes,g=a.button,O=function(e){return r._(e,{project:"limited-team"})},N=O("I understand that any member can upgrade my team to Dropbox Business, which will give them administrative control over the team."),x=_.get_viewer(),D=function(e){return e.toLowerCase().split("@")[1]},b=t.createClass({displayName:"LimitedTeamCreateForm",mixins:[t.addons.LinkedStateMixin],propTypes:{canSetTeamRequestMembershipPolicy:A.bool,company_name:A.string,suggested_contacts:A.array,notes_link_policy:A.number,onSuccess:A.func,onCancel:A.func},getInitialState:function(){return{companyName:this.props.company_name,requestMembershipPolicy:S.AUTO_ACCEPT,tosAgree:!1,errors:null,custom_message:null,emails:null}},componentWillMount:function(){var e;return this.setState({emails:function(){var t,n,r,o;for(r=this.props.suggested_contacts,o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(e.email);return o}.call(this)})},_validateInputs:function(){var e,t;return t=this.state,this.state.errors||(t.errors={}),e=!0,0===this.state.companyName.trim().length?(t.errors.team_name={message_text:O("Please enter a company name.")},e=!1):delete t.errors.team_name,this.refs["invite-form"].areAllContactsValid()||(e=!1),e&&delete t.errors,this.setState(t),e},onClickCreate:function(e){return e.preventDefault(),!this.state.submitting&&this._validateInputs()?this.refs["invite-form"].getFinalData(function(e){return function(t){var n,r;return r=t.emails,n=t.custom_message,e.refs["invite-form"].areAllContactsValid()?e.setState({emails:r,custom_message:n},function(){return e.submitFinalData()}):void 0}}(this)):void 0},onClickConfirm:function(e){return e.preventDefault(),this.state.submitting?void 0:this.submitFinalData()},submitFinalData:function(){var e;return this.setState({submitting:!0}),s.WebRequest({url:"/team/create_limited",data:{team_name:this.state.companyName,tos_agree:"True",emails:this.state.emails,custom_message:this.state.custom_message,suggested_emails:function(){var t,n,r,o;for(r=this.props.suggested_contacts,o=[],t=0,n=r.length;n>t;t++)e=r[t].email,o.push(e);return o}.call(this),request_membership_policy:this.props.canSetTeamRequestMembershipPolicy?this.state.requestMembershipPolicy:void 0,notes_link_policy:this.props.notes_link_policy,_tk:window.location.pathname},complete:function(e){return function(){return e.setState({submitting:!1})}}(this),success:function(e){return function(){return e.props.onSuccess?e.props.onSuccess():n.redirect("/team")}}(this),error:function(e){return function(t,n,r){return"rate-limit"===t.getResponseHeader("x-dropbox-app-error")?void o.error(O("You can’t create more than two teams per user account. Please reach out to support if you’d like to create a new team.")):e.setState({errors:function(){try{return JSON.parse(r)}catch(e){}}(),showConfirmModal:!1})}}(this)})},render:function(){var e,n,r;return n=function(){var t,n,r,o;for(r=this.state.emails,o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(new E({email:e,type:f.EMAIL}));return o}.call(this),P.div({className:"CreateLimitedTeamForm"},P.div({className:"CreateLimitedTeamForm-labelHeader"},O("Company name")),t.createElement(l.text,{valueLink:this.linkState("companyName"),autoComplete:"off",className:"CreateLimitedTeamForm-company-name-input",placeholder:O("Company or organization name"),error:null!=(r=this.state.errors)?r.team_name:void 0}),P.div({className:"CreateLimitedTeamForm-labelHeader"},O("Invite team members")),t.createElement(u,{ref:"invite-form",user:x.personal_user,invitationContext:u.InvitationContexts.createLimitedTeam,populatedContacts:n,populatedCustomMessage:this.state.custom_message,autofocusTokenizer:!1}),this.props.canSetTeamRequestMembershipPolicy?t.createElement(d,{labelVariant:v.FOR_USER,teamDomain:D(x.personal_user.email),valueLink:this.linkState("requestMembershipPolicy")}):void 0,P.div({className:"o-flag o-flag--rev CreateLimitedTeamForm-actionPanel o-flag--top"},P.div({className:"CreateLimitedTeamForm-actionButtonWrapper o-flag__fix"},P.span({className:I({"dbmodal-loading":!0,hidden:!this.state.submitting})},P.img({src:"/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"})),this.props.onCancel?g({importance:"secondary",className:"CreateLimitedTeamForm-cancelButton",onClick:this.props.onCancel},O("Not Now")):void 0,g({className:"CreateLimitedTeamForm-actionButton",onClick:this.onClickCreate},O("Create team")))))}}),y=t.createClass({displayName:"LimitedTeamCreateModal",propTypes:{suggestedContacts:A.array,canSetTeamRequestMembershipPolicy:A.bool,onSuccess:A.func,selectedOptionInTeamCreateForm:A.oneOf(["personal","work"]),showOnboardingOnTeamCreation:A.bool},getDefaultProps:function(){return{suggestedContacts:[]}},statics:{show:function(e){var t;return e.suggestedMembers&&(e.suggestedContacts=function(){var n,r,o,i;for(o=e.suggestedMembers,i=[],n=0,r=o.length;r>n;n++)t=o[n],i.push(new E({type:f.EMAIL,name:t.display_name,email:t.email}));return i}()),T.showInstance(y(e))}},render:function(){var e;return e={title:O("Create a Team"),ref:"modal",acceptButtonText:null,width:640,onShow:function(){return C.log("clicked_create_team_cta")},onDismiss:function(){return C.log("dismissed_create_team_modal")}},t.createElement(T,e,t.createElement(p,{onSuccess:this.props.onSuccess,personalUser:x.personal_user,defaultMigrationType:this.props.selectedOptionInTeamCreateForm,showOnboardingOnTeamCreation:this.props.showOnboardingOnTeamCreation}))}}),{LimitedTeamCreateForm:b,LimitedTeamCreateModal:y}})}.call(this),function(){define("modules/clean/teams/limited_team_invite_modal",["external/underscore","external/react","modules/core/html","modules/core/uri","modules/core/i18n","modules/clean/react/react_i18n","modules/core/notify","modules/clean/ajax","modules/clean/contacts/data","modules/clean/react/modal","modules/clean/teams/limited_team_invite_form","modules/clean/viewer","modules/clean/analytics"],function(e,t,n,r,o,i,s,a,c,l,m,u,p){var d,_,h,f,g,E,b,y,T,v;return E=o._,T=o.ungettext,f=i.RP_,d=c.Contact,h=l.Modal,g=p.TeamsWebActionsLogger,b=t.DOM,y=t.PropTypes,v=u.get_viewer(),_=t.createClass({displayName:"LimitedTeamInviteModal",propTypes:{onInvited:y.func,onDismiss:y.func,populatedCustomMessage:y.string,populatedContacts:y.arrayOf(y.instanceOf(d)),memberInviteLimit:y.number,maxTeamSize:y.number},getInitialState:function(){return{canProceed:!1,submitting:!1}},_canProceed:function(){var e,t;return(null!=(e=this.refs.members)?e.areAllContactsValid():void 0)&&!(null!=(t=this.refs.members)?t.isEmpty():void 0)},onClickInvite:function(t){return t.preventDefault(),this.refs.members.getFinalData(function(t){return function(o){var i,c,l;return l=o.emails,c=o.custom_message,i=t._canProceed(),t.setState({canProceed:i}),i?(t.setState({submitting:!0}),a.WebRequest({url:"/account/team/add_users",subject_user:v.work_user,data:{emails:l,custom_message:c,team_id:v.team_id},complete:function(){return t.isMounted()?t.setState({submitting:!1}):void 0},success:function(o){var i,a,c,l,m,u;return o=JSON.parse(o),a=e.values(o.users),a.length>0?(null!=t.props.memberInviteLimit?(c=t.props.memberInviteLimit-a.length,c>0&&(m={tk:t.props.memberInviteLimit,_camp:"flash"},u=r({path:"/team/upgrade",query:m}),l=T('Members invited. You can invite %(num_rem)s more member before you need to upgrade to Dropbox Business. <a href="%(upsell_url)s">Upgrade now.</a>','Members invited. You can invite %(num_rem)s more members before you need to upgrade to Dropbox Business. <a href="%(upsell_url)s">Upgrade now.</a>',c).format({num_rem:c,upsell_url:u.toString()}),s.success(new n(l)))):s.success(T("Member invited.","Members invited.",a.length)),"function"==typeof(i=t.props).onInvited&&i.onInvited(),t.refs.modal.close()):s.error()},error:function(e){return"rate-limit"===e.getResponseHeader("x-dropbox-app-error")?s.error(new n(E('%(team_name)s has reached the maximum number of team members allowed on Dropbox Basic. Please <a href="/business/contact">contact sales</a> to add more members to your team.').format({team_name:v.team_name}))):s.error()}})):void 0}}(this))},onDismissModal:function(){var e;return g.log("canceled_invite_team_members"),"function"==typeof(e=this.props).onDismiss?e.onDismiss():void 0},onMembersFormChange:function(){return this.setState({canProceed:this._canProceed()})},_getAcceptButtonText:function(){var e;return T("Send invite","Send invites",(null!=(e=this.refs.members)?e.getContacts().length:void 0)||0)},render:function(){return t.createElement(h,{title:E("Invite team members"),acceptButtonText:this._getAcceptButtonText(),dismissButtonText:E("Cancel"),onAccept:this.onClickInvite,onDismiss:this.onDismissModal,acceptButtonDisabled:!this.state.canProceed,submitting:this.state.submitting,className:"limited-team-invite-modal",ref:"modal"},t.createElement(m,{ref:"members",user:v.work_user,onChange:this.onMembersFormChange,errorMessageSpaceFixed:!0,populatedCustomMessage:this.props.populatedCustomMessage,populatedContacts:this.props.populatedContacts,autofocusTokenizer:!0,memberInviteLimit:this.props.memberInviteLimit,maxTeamSize:this.props.maxTeamSize}))}})})}.call(this),function(){define("modules/clean/teams/new_limited_team_create_form",["external/react","external/underscore","modules/core/browser","modules/core/i18n","modules/core/notify","modules/core/uri","modules/clean/ajax","modules/clean/analytics","modules/clean/react/button","modules/clean/react/input","modules/clean/react/radio","modules/clean/react/react_i18n","modules/clean/components/title_bubble","modules/clean/teams/constants","modules/clean/user"],function(e,t,n,r,o,i,s,a,c,l,m,u,p,d,_){var h,f,g,E,b,y,T,v,S,N,C,O,I,P,D;return O=r._,N=a.TeamsWebActionsLogger,y=m.RadioGroup,T=m.RadioItem,v=m.RadioItemVariant,b=u.R_,E=d.REQUEST_MEMBERSHIP_POLICY_VALUES,I=e.createElement,P=e.DOM,D=e.PropTypes,C=l.text,g=l.password,h=c.button,f=e.addons.LinkedStateMixin,S=e.addons.CSSTransitionGroup,e.createClass({mixins:[f],displayName:"NewLimitedTeamCreateForm",propTypes:{personalUser:D.instanceOf(_),defaultMigrationType:D.oneOf(["personal","work"]),onSuccess:D.func,showOnboardingOnTeamCreation:D.bool},getDefaultProps:function(){return{defaultMigrationType:"work"}},getInitialState:function(){return{teamName:"",migrationType:this.props.defaultMigrationType,email:"",password:"",tosChecked:!1,errors:{},serverErrors:{},submitting:!1}},componentDidUpdate:function(){return this._updateErrors()},_getErrors:function(){var e;return e={},0===this.state.teamName.trim().length&&(e.team_name={message_text:O("Please enter a company name")}),"personal"===this.state.migrationType&&(0===this.state.email.trim().length&&(e.email={message_text:O("Please enter an email address")}),0===this.state.password.trim().length&&(e.password={message_text:O("Please enter a password")}),this.state.tosChecked||(e.tos_agree={message_text:O("Please check the box to continue")})),e},_updateErrors:function(){var e,n;return e=this._getErrors(),n=t.omit(this.state.errors,function(t,n){return!(n in e)}),t.isEqual(this.state.errors,n)?void 0:this.setState({errors:n})},_onCTAClick:function(e){var r,a;return e.preventDefault(),this.state.submitting?void 0:(r=this._getErrors(),this.setState({errors:r}),t.isEmpty(r)?(this.setState({submitting:!0,serverErrors:{}}),a=function(e){return function(t,n,r){var i;return e.setState({submitting:!1}),"rate-limit"===t.getResponseHeader("x-dropbox-app-error")?void o.error(O("You can’t create more than two teams per user account. Please reach out to support if you’d like to create a new team.")):(r=function(){try{return JSON.parse(r)}catch(e){}}()||{},e._logErrors(r),"email-taken"===(null!=(i=r.email)?i.message_text:void 0)&&(r.email.message_text=O("This e-mail is already taken.")),void e.setState({serverErrors:r}))}}(this),"work"===this.state.migrationType?s.WebRequest({url:"/team/create_limited",data:{team_name:this.state.teamName,tos_agree:!0,request_membership_policy:E.AUTO_ACCEPT,show_onboarding_on_team_creation:this.props.showOnboardingOnTeamCreation,_tk:window.location.pathname},success:function(e){return function(t){var r;return e.props.onSuccess?"function"==typeof(r=e.props).onSuccess?r.onSuccess(JSON.parse(t)):void 0:n.redirect(i({path:"/team",query:{team_created:1}}))}}(this),error:a}):s.WebRequest({url:"/register_for_team_creation",data:{team_name:this.state.teamName,email:this.state.email,password:this.state.password,fname:this.props.personalUser.fname,lname:this.props.personalUser.lname,tos_agree:this.state.tosChecked},success:function(e){return function(){return n.redirect("/verify_email_for_team_creation?email="+encodeURIComponent(e.state.email))}}(this),error:a})):void this._logErrors(r))},_logErrors:function(e){var n;return e=t.mapObject(e,function(e){return e.message_text}),n=t.keys(e).length,n>0&&"work"!==this.state.migrationType&&(e.error_count=n,N.log("create_new_team_dropbox_error",e),"email-taken"===e.email)?N.log("entered_existing_account_info"):void 0},_onKeyPress:function(e){return"Enter"===e.key?this._onCTAClick(e):void 0},_renderError:function(e){var t,n,r,o,i;return t=(null!=(n=this.state.errors[e])?n.message_text:void 0)||(null!=(r=this.state.serverErrors[e])?r.message_text:void 0),t||null==(null!=(o=this.state.serverErrors[e])?o.message_html:void 0)||(t=b({},null!=(i=this.state.serverErrors[e])?i.message_html:void 0)),I(S,{transitionName:"form-error"},t?P.div({className:"form-error",title:t},t):void 0)},_renderTeamNameForm:function(){return P.div({className:"team-name-form"},P.label({htmlFor:"team_name_input",className:"team-name-form__label"},O("Team Name")),this._renderError("team_name"),I(C,{valueLink:this.linkState("teamName"),className:"team-name-form__input",placeholder:O("Company or organization name"),"disable-errors":!0,autofocus:!0,id:"team_name_input",onKeyPress:this._onKeyPress}))},_renderSignupForm:function(){return P.div({key:"signup-form",className:"signup-form"},P.div({className:"signup-form-input"},this._renderError("email"),I(C,{valueLink:this.linkState("email"),className:"signup-form-input__email",placeholder:O("Enter work email"),"disable-errors":!0,inline:!0,onKeyPress:this._onKeyPress})),P.div({className:"signup-form-input"},this._renderError("password"),I(g,{valueLink:this.linkState("password"),className:"signup-form-input__password",placeholder:O("Password"),"disable-errors":!0,inline:!0,measureStrength:!0,onKeyPress:this._onKeyPress})),P.div({className:"signup-form__tos"},this._renderError("tos_agree"),P.input({checkedLink:this.linkState("tosChecked"),className:"signup-form__tos-checkbox",type:"checkbox",id:"signup-form__tos-checkbox"}),P.label({htmlFor:"signup-form__tos-checkbox",className:"signup-form__tos-label"},b(null,'I agree to <a href="/terms" target="_blank">Dropbox Terms</a>'))))},render:function(){var e,t,n,r;return e={value:this.state.migrationType,requestChange:function(e){return function(t){return t!==e.state.migrationType?(N.log("onboarding_creation_select_migration_option",{migration_type:t}),e.setState({migrationType:t})):void 0}}(this)},n=this.props.personalUser,r=I(T,{value:"work",key:"work-option"},P.div({className:"migration-option"},P.h3({className:"migration-option__title"},O("Make my current Dropbox a Team Dropbox")),P.div({className:"migration-option__description"},O("All of your files will remain with “%(user_email)s”, and will stay private until you choose to share them. If you use this Dropbox mostly for personal stuff, choose “Create a new Team Dropbox.”").format({user_email:n.email})," ",I(p,{text:O("Converting your current Dropbox (%(user_email)s) to a Team Dropbox allows you to more easily share with teammates and organize company files. You will still have full ownership over your account. As the team creator, only you will have have admin permissions and are the only person who can upgrade the team to Dropbox Business.").format({user_email:n.email}),direction:"east"},P.span({className:"migration-option__learn-more"},O("Learn more")))))),t=I(T,{value:"personal",key:"personal-option"},P.div({className:"migration-option"},P.h3({className:"migration-option__title"},O("Create a new Team Dropbox")),P.div({className:"migration-option__description"},O("Keep your work and personal files separate by creating a new Team Dropbox. You can move any files from your current Dropbox [%(user_email)s] after you set up your new Team Dropbox.").format({user_email:n.email})," "),I(S,{transitionName:"signup-form"},"personal"===this.state.migrationType?this._renderSignupForm():void 0))),P.div({className:"new-limited-team-create-form"},this._renderTeamNameForm(),P.div({className:"account-migration-form"},I(y,{variant:v.Large,align:"top",legend:O("Account migration options."),valueLink:e},"personal"===this.props.defaultMigrationType?[t,r]:[r,t])),P.hr(),P.div({className:"cta-form"},I(h,{className:"cta-form__button",onClick:this._onCTAClick,disabled:this.state.submitting},O("personal"===this.state.migrationType?"Continue":"Create Team Dropbox"))))}})})}.call(this),function(){define("modules/clean/teams/request_membership_policy_select",["external/react","modules/core/i18n","modules/clean/react/select","modules/clean/react/sprite","modules/clean/react/tooltip","modules/clean/teams/constants"],function(e,t,n,r,o,i){var s,a,c,l,m,u,p,d,_,h,f,g,E,b;return f=t._,d=i.REQUEST_MEMBERSHIP_POLICY_VALUES,p=i.REQUEST_MEMBERSHIP_POLICY_LABEL_VARIANTS,g=e.createElement,E=e.DOM,
b=e.PropTypes,u=[d.AUTO_ACCEPT,d.REQUIRE_APPROVAL,d.DISABLED],_=d.REQUIRE_APPROVAL,s=d.AUTO_ACCEPT,a=d.DISABLED,l=p.FOR_USER,c=p.FOR_ADMIN,m={},m[l]={},m[l][_]=f("Find and ask to join"),m[l][s]=f("Find and join on their own"),m[l][a]=f("Find and join by invite only"),m[c]={},m[c][_]=f("Find and ask to join"),m[c][s]=f("Find and join on their own"),m[c][a]=f("Find and join by invite only"),h=e.createClass({displayName:"RequestMembershipPolicySelect",propTypes:{defaultValue:b.oneOf(u),labelVariant:b.oneOf([l,c]).isRequired,onChange:b.func,teamDomain:b.string.isRequired,valueLink:b.shape({value:b.oneOf(u).isRequired,requestChange:b.func.isRequired})},getDefaultProps:function(){return{defaultValue:d.AUTO_ACCEPT}},render:function(){var e,t;return t=f("Only coworkers with a verified @%(team_domain)s email address can find or join your team.").format({team_domain:this.props.teamDomain}),E.div({className:"request-membership-approval-select"},E.div({className:"request-membership-approval-select__label-wrapper"},g(o.Tooltip,{position:o.TooltipPosition.RIGHT,tooltip_contents:E.div({className:"request-membership-approval-select__tooltip"},t)},E.label({className:"request-membership-approval-select__label"},f("How should other coworkers join the team?")),g(r,{className:"request-membership-approval-select__tooltip-icon",group:"web",name:"info",alt:f("more information")}))),g(n.input,{className:"request-membership-approval-select__select","disable-errors":!0,defaultValue:this.props.defaultValue,valueLink:this.props.valueLink,onChange:this.props.onChange},function(){var t,r,o;for(o=[],t=0,r=u.length;r>t;t++)e=u[t],o.push(g(n.option,{value:e,key:e},m[this.props.labelVariant][e]));return o}.call(this)))}})})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};define("modules/clean/teams/team_choose",["external/react","external/underscore","jquery","modules/core/i18n","modules/core/user_i18n","modules/core/uri","modules/clean/analytics","modules/clean/avatar/avatar_with_default","modules/clean/avatar/initials_avatar_with_color","modules/clean/avatar/stacked_avatars","modules/clean/em_string","modules/clean/react/button","modules/clean/components/title_bubble","modules/clean/react/image","modules/clean/static_urls","modules/clean/teams/constants","modules/clean/teams/prop_types"],function(t,n,r,o,i,s,a,c,l,m,u,p,d,_,h,f,g){var E,b,y,T,v,S,N,C,O,I,P,D,A,x;return C=o._,x=o.ungettext,N=a.TeamsWebActionsLogger,A=h.static_url,y=f.TEAM_JOIN_REQUEST_STATE,P=g.joinableTeam,O=t.createElement,I=t.DOM,D=t.PropTypes,b=t.addons.CSSTransitionGroup,T=t.createClass({displayName:"TeamChooseWidget",propTypes:{cancelJoinTeamHandler:D.func.isRequired,joinableTeams:D.arrayOf(P).isRequired,joinTeamHandler:D.func.isRequired},render:function(){var e,t,n,r,o,i,s;for(e=this.props.joinableTeams.slice(0),r=[],(null!=(i=this.props.joinableTeams[0])?i.is_invite:void 0)&&(r=this.props.joinableTeams.slice(0,1),e=e.slice(1)),n=t=0,o=e.length;o>t;n=++t)if(s=e[n],s.join_request_state===y.REQUEST_APPROVED){r.push(s),e.splice(n,1);break}return I.div(null,r.length>0?O(v,{cancelJoinTeamHandler:this.props.cancelJoinTeamHandler,joinableTeams:r,joinTeamHandler:this.props.joinTeamHandler,title:x("Team invitation","Team invitations",r.length),className:"invited-section"}):void 0,e.length>0?O(v,{cancelJoinTeamHandler:this.props.cancelJoinTeamHandler,joinableTeams:e,joinTeamHandler:this.props.joinTeamHandler,title:x("Team you can join","Teams you can join",e.length)}):void 0)}}),v=t.createClass({displayName:"TeamJoinList",propTypes:{buttonImportance:D.string,cancelJoinTeamHandler:D.func.isRequired,className:D.string,joinableTeams:D.arrayOf(P).isRequired,joinTeamHandler:D.func.isRequired,title:D.string.isRequired,maxNamesToShow:D.number,staticRows:D.arrayOf(D.shape({icon:D.element,title:D.string,subtitle:D.string,actionText:D.string,actionHandler:D.func}))},getInitialState:function(){var t,n,r,o,i,s,a,c;for(c=[],n=[y.WAITING_FOR_APPROVAL,y.REQUEST_APPROVED,y.REQUEST_REJECTED_OPEN],i=this.props.joinableTeams,r=t=0,o=i.length;o>t;r=++t)a=i[r],s=a.join_request_state,e.call(n,s)>=0?c.unshift(a.team_id):c.push(a.team_id);return{teamSortOrder:c,expanded:!1}},getDefaultProps:function(){return{maxNamesToShow:3,staticRows:[]}},componentWillReceiveProps:function(e){var t,r;return e.joinableTeams?(t=n.indexBy(e.joinableTeams,"team_id"),r=n.filter(this.state.teamSortOrder,function(e){return t[e]}),r=n.uniq(r.concat(n.map(t,function(e){return e.team_id}))),this.setState({teamSortOrder:r})):void 0},getSortedJoinableTeams:function(){var e;return e=n.indexBy(this.props.joinableTeams,"team_id"),n.map(this.state.teamSortOrder,function(t){return e[t]})},renderShowMore:function(e){return I.li({className:"team-list-show-more"},I.span({className:"team-list-show-more-button",onClick:function(e){return function(){return e.setState({expanded:!0}),N.log("click_expand")}}(this)},x("View %(num_teams)d more","View %(num_teams)d more",e).format({num_teams:e})))},render:function(){var e,t,n,r,o,i,s,a,c,l,m;for(e=Math.max(0,3-this.props.staticRows.length),i=this.getSortedJoinableTeams().map(function(e){return function(t){return O(S,{team:t,cancelJoinTeamHandler:e.props.cancelJoinTeamHandler,joinTeamHandler:e.props.joinTeamHandler,key:t.team_id,buttonImportance:e.props.buttonImportance,maxNamesToShow:e.props.maxNamesToShow})}}(this)),t=i,l=null,s=null,i.length>e&&(t=i.slice(0,e),this.state.expanded?s=i.slice(e):l=this.renderShowMore(i.length-e)),c=this.props.staticRows,n=0,o=c.length;o>n;n++)m=c[n],r=m.icon||O(_,{src:A("/static/images/teams/add_cir-vfl6sl23s.png"),srcHiRes:A("/static/images/teams/add_cir@2x-vflGMnZ12.png")}),a=O(E,{icon:r,title:m.title||C("Create a new Team Dropbox"),subtitle:m.subtitle||C("Start a new team"),actionText:m.actionText||C("Create"),actionHandler:m.actionHandler}),this.state.expanded?s.push(a):t.push(a);return I.div({className:this.props.className},I.div({className:"team-list-title"},this.props.title),I.ol({className:"team-list-view"},t,l,i.length>e?O(b,{transitionName:"team-list-show-more-section"},s?I.div({className:"team-list-show-more-section"},s):void 0):void 0))}}),E=t.createClass({displayName:"BasicListItem",propTypes:{icon:D.element,title:D.string,subtitle:D.string,actionText:D.string,actionHandler:D.func},render:function(){return I.li({className:"team-list-item",key:this.props.title+this.props.subtitle},I.div({className:"team-list-item-contents"},I.div({className:"team-list-item__custom-img u-mar-right-s"},this.props.icon),I.div({className:"team-list-item-body"},I.div({className:"team-list-item-text team-list-item-title"},this.props.title),I.span({className:"team-list-item-text"},this.props.subtitle)),I.div({className:"team-list-item-actions"},O(p.button,{importance:"primary",onClick:this.props.actionHandler},this.props.actionText))),I.div({className:"clear"}))}}),S=t.createClass({displayName:"TeamJoinListItem",propTypes:{team:P.isRequired,cancelJoinTeamHandler:D.func.isRequired,joinTeamHandler:D.func.isRequired,buttonImportance:D.string,maxNamesToShow:D.number},getInitialState:function(){return{submit:!1}},componentWillReceiveProps:function(e){return this.setState({submit:!1})},_is_pending_state:function(t){var n;return n=[y.WAITING_FOR_APPROVAL,y.REQUEST_REJECTED_OPEN],e.call(n,t)>=0},getCtaButtonProps:function(){var e;return e=this.props.team,e.is_invite||e.join_request_state===y.REQUEST_APPROVED?{children:C("Accept Invitation"),disabled:this.state.submit}:this._is_pending_state(e.join_request_state)?{children:C("Asked to join"),disabled:!0}:e.join_request_state===y.APPROVAL_REQUIRED?{children:C("Ask to join"),disabled:this.state.submit}:e.join_request_state===y.CAN_AUTO_JOIN?{children:C("Join"),disabled:this.state.submit}:void 0},renderActionItem:function(){var e;return e=this.props.team,this._is_pending_state(e.join_request_state)?I.div({className:"cancel-request"},C("Request Sent"),I.span({className:"u-pad-xs"},C("·")),I.a({onClick:function(t){return function(){return t.props.cancelJoinTeamHandler(e)}}(this)},C("Cancel"))):O(p.button,r.extend({importance:this.props.buttonImportance||"tertiary",onClick:function(t){return function(){return t.props.joinTeamHandler(e),t.setState({submit:!0})}}(this)},this.getCtaButtonProps()))},_generateMemberCountSpan:function(e){return I.span({className:"team-list-item-text team-list-item-subtitle"},x("%(num_members)d member","%(num_members)d members",e).format({num_members:e}))},renderMembersSection:function(e){var t,n,r,o,i,s,a,c,l,m,p;if(e.is_private)return[I.span({className:"team-list-item-text team-list-item-invitee-name"},u.em_snippet(C("Private"),30)),I.span({className:"u-pad-xxs",key:"middle-dot"},C("·")),this._generateMemberCountSpan(e.num_members)];if(e.inviting_user_name){for(p="",l=e.members_to_display,n=0,i=l.length;i>n;n++)a=l[n],p+=a.email+"\n";return e.members_to_display.length<e.num_members&&(t=e.num_members-e.members_to_display.length,p+=C("and %(extra)s more").format({extra:t})),[O(d,{text:e.inviting_user_email||e.inviting_user_name,key:"invitee-name",direction:"south"},I.span({className:"team-list-item-text team-list-item-invitee-name"},u.em_snippet(C("Invited by %(admin_name)s").format({admin_name:e.inviting_user_name}),30))),I.span({className:"u-pad-xxs",key:"middle-dot"},C("·")),O(d,{text:p,direction:"south",respectLineBreaks:!0,key:"title-bubble"},this._generateMemberCountSpan(e.num_members))]}for(c="",p="",m=e.members_to_display,r=o=0,s=m.length;s>o;r=++o)a=m[r],r>this.props.maxNamesToShow-1?p+=a.email+"\n":c+=r===e.members_to_display.length-1?0!==r&&r!==this.props.maxNamesToShow-1?C("and %(display_name)s").format({display_name:a.display_name}):""+a.display_name:a.display_name+", ";return e.members_to_display.length<e.num_members&&(t=e.num_members-e.members_to_display.length,p+=C("and %(extra)s more").format({extra:t})),p?[I.span({className:"team-member-names",key:"team-member-names"},c),O(d,{text:p,direction:"south",respectLineBreaks:!0,key:"title-bubble"},I.span({},x("and %(num_members)s more","and %(num_members)s more",e.num_members-this.props.maxNamesToShow).format({num_members:e.num_members-this.props.maxNamesToShow})))]:I.span({className:"team-member-names"},c)},renderAvatars:function(e){var t;return e.is_private?I.div({className:"team-list-item__custom-img u-mar-right-s"},O(_,{src:A("/static/images/teams/private_cir-vfl4ZCA6w.png"),srcHiRes:A("/static/images/teams/private_cir@2x-vflv746EN.png")})):e.members_to_display.length>=2?O(m,{user_front:e.members_to_display[0],user_back:e.members_to_display[1],dimension:24,shape:"CIRCLE"}):1===e.members_to_display.length?(t=e.members_to_display[0],I.div({className:"single-avatar-section u-l-ib u-mar-right-s"},O(c,{dimension:32,photoUrl:t.avatar_url,defaultAvatar:O(l,{dimension:32,name:t.display_name,initials:i.getInitials(t.display_name||t.email),shape:"CIRCLE"})}))):void 0},render:function(){var e;return e=this.props.team,I.li({className:"team-list-item"},I.div({className:"team-list-item-contents"},this.renderAvatars(e),I.div({className:"team-list-item-body"},I.div({className:"team-list-item-text team-list-item-title"},e.team_name),this.renderMembersSection(e)),I.div({className:"team-list-item-actions"},this.renderActionItem())),I.div({className:"clear"}))}}),{TeamChooseWidget:T,TeamJoinList:v}})}.call(this),function(){define("modules/clean/teams/team_promo_page",["external/classnames","external/react","modules/clean/account/email","modules/clean/account/email_verify_reasons","modules/clean/ajax","modules/clean/analytics","modules/clean/contacts/data","modules/clean/contacts/types","modules/clean/notserver","modules/clean/react/button","modules/clean/react/dbox_app_promo","modules/clean/react/image","modules/clean/react/modal","modules/clean/static_urls","modules/clean/teams/constants","modules/clean/teams/limited_team_invite_and_settings_modal","modules/clean/teams/dbox_app_team_promo_grid","modules/clean/teams/limited_team_create_modal","modules/clean/teams/limited_team_invite_modal","modules/clean/teams/prop_types","modules/clean/teams/team_choose","modules/clean/teams/team_suggested_member_preview","modules/clean/viewer","modules/constants/python","modules/constants/teams","modules/core/browser","modules/core/i18n","modules/core/notify","modules/core/uri"],function(e,t,n,r,o,i,s,a,c,l,m,u,p,d,_,h,f,g,E,b,y,T,v,S,N,C,O,I,P){var D,A,x,R,L,w,k,F,M,B,H,V,U,j,q,W,G,Y,K,J,z,Q,X;return R=n.EmailVerification,W=o.WebRequest,q=i.TeamsWebActionsLogger,D=s.Contact,k=c.NotClients,A=m.DboxAppPromo,x=m.DboxAppPromoHeader,w=p.Modal,Q=d.static_url,B=_.TEAM_JOIN_REQUEST_STATE,M=_.REQUEST_MEMBERSHIP_POLICY_VALUES,L=g.LimitedTeamCreateModal,J=b.joinableTeam,U=y.TeamChooseWidget,V=S.TRADEMARK_BUSINESS,H=N.TEAM_PROMO_PAGE_IMAGE_PATHS,G=O._,X=O.ungettext,Y=t.createElement,K=t.DOM,z=t.PropTypes,F={},F[B.WAITING_FOR_APPROVAL]=!0,F[B.REQUEST_REJECTED_OPEN]=!0,j=t.createClass({displayName:"TeamPromoPage",propTypes:{canCreateTeam:z.bool,isEmailVerified:z.bool,canSetTeamRequestMembershipPolicyOnCreate:z.bool,autoShowCreate:z.bool,initialJoinableTeams:z.arrayOf(J),suggestedMembers:z.arrayOf(z.shape({name:z.string,email:z.string})),email:z.string,emailIsBusinessDomain:z.bool,creatorCont:z.string,showOnboardingOnTeamCreation:z.bool,teamMembersLimit:z.number,joinerCont:z.string,hasPendingTeam:z.bool,selectedOptionInTeamCreateForm:z.oneOf(["personal","work"]),dbimgCache:z.object,immediatelySendVerificationEmail:z.bool},onInviteModalDismissed:function(){return W({url:"/team/get_team_folder_pathname",type:"GET",success:function(e){var t;return t=JSON.parse(e),C.redirect("/home"+t)},error:function(){return C.redirect("/")}})},onTeamCreate:function(){return this.props.showOnboardingOnTeamCreation?v.get_viewer().reload(function(e){return function(){return w.showInstance(Y(h,{onInvited:e.onInviteModalDismissed,onDismissCompleted:e.onInviteModalDismissed,maxTeamSize:e.props.teamMembersLimit,initialTeamRequestMembershipPolicy:M.AUTO_ACCEPT,canSetTeamRequestMembershipPolicy:!0,viewer:v.get_viewer(),suggested_contacts:e.props.suggestedMembers.map(function(e){return new D({dbx_account_id:e.avatar_url&&e.id,type:a.EMAIL,name:e.display_name,email:e.email,photo_url:e.avatar_url})})}))}}(this)):C.redirect(this.props.creatorCont)},getDefaultProps:function(){return{immediatelySendVerificationEmail:!1,viewer:v.get_viewer()}},getInitialState:function(){return{joinableTeams:this.props.initialJoinableTeams}},_getSvgImage:function(t,n){return K.div({className:e({"promo-header-image":!0,clickable:null!=n}),onClick:n},K.img({src:Q(t)}))},onCreateTeamClicked:function(){return this.props.hasPendingTeam?(this.setState({confirmingPendingTeamCreation:!0}),k[this.props.viewer.personal_user.id].pause(),C.redirect(P({path:"/team",query:{create_pending_team:1}}))):this._showCreateTeamModal()},_showCreateTeamModal:function(){return L.show({canSetTeamRequestMembershipPolicy:this.props.canSetTeamRequestMembershipPolicyOnCreate,onSuccess:this.onTeamCreate,selectedOptionInTeamCreateForm:this.props.selectedOptionInTeamCreateForm,showOnboardingOnTeamCreation:this.props.showOnboardingOnTeamCreation})},onTeamJoinClicked:function(e){var t;return t=function(e){return e.is_invite?"pending_invite":e.join_request_state===B.REQUEST_APPROVED?"join_approved":e.join_request_state===B.CAN_AUTO_JOIN?"auto_join":e.join_request_state===B.APPROVAL_REQUIRED?"ask_to_join":""},q.log("select_team",{team_id:e.team_id,team_size:e.num_members,type:t(e)}),this.gotoJoinTeamPage(e)},gotoJoinTeamPage:function(e){var t;return e.is_invite?(t={signup_key:e.signup_key,cont:this.props.joinerCont},C.redirect(P({path:"/team/join",query:t}).toString())):W({url:"/team/discover/join_ajax",data:{team_id:e.team_id,cont:this.props.joinerCont},success:function(e){return function(t){switch(t=JSON.parse(t),null!=t?t.result:void 0){case"request_sent":if(I.success(G("Request to join sent.")),t.joinableTeams)return e.setState({joinableTeams:t.joinableTeams});break;case"can_join":return C.redirect(t.url);case"max_team_size_achieved":return I.error(G("This team has reached the maximum size. Please ask the admins of this team to upgrade to %(trademark_business)s, which allows teams to add as many members as possible.").format({trademark_business:V}));default:return I.error(G("Invalid request"))}}}(this)})},onCancelRequestToJoinClicked:function(e){return W({url:"/team/join_request/cancel",data:{team_id:e.team_id},success:function(e){return function(t){return t=JSON.parse(t),(null!=t?t.joinableTeams:void 0)&&e.setState({joinableTeams:t.joinableTeams}),I.success(G("Request to join canceled"))}}(this)})},onNewResendVerificationEmailClicked:function(){var e;return e=R.getForRole("personal"),this.props.immediatelySendVerificationEmail?e.send_email_and_show_resend_modal(r.CREATE_TEAM,function(){}):e.show(null,r.CREATE_TEAM)},logPromoSeen:function(){var e,t,n,r,o,i,s,a,c,l;if(n={},this.state.joinableTeams){for(l=[],i=[],s=[],a=[],c=[],r=this.state.joinableTeams,e=0,t=r.length;t>e;e++)o=r[e],o.is_invite?c.push(o):o.join_request_state===B.REQUEST_APPROVED?i.push(o):o.join_request_state===B.WAITING_FOR_APPROVAL?l.push(o):o.join_request_state===B.CAN_AUTO_JOIN?a.push(o):o.join_request_state===B.APPROVAL_REQUIRED&&s.push(o);n={has_pending_invite:c.length>0,has_outstanding_request:l.length>0,has_approved_request:i.length>0,num_auto_join:a.length,num_ask_to_join:s.length}}return n.verified=this.props.isEmailVerified,n._tk=window.location.pathname,q.log("saw_team_promo_page",n,null,null,!1,q.LOG_CATEGORY.PROMO_TEAMS)},renderPromoHeader:function(){var t;return this.logPromoSeen(),this.props.isEmailVerified?0===this.state.joinableTeams.length?(t=G("Using Dropbox at work?"),Y(x,{className:e(this.props.className,t.length>75?"small-title":void 0,"no-team"),title:t,text:G("Set up a free team, and get new features that help your company work better together."),primaryButtonText:G("Create free team"),primaryButtonHandler:this.onCreateTeamClicked,primaryButtonDisabled:!1,rightComponent:this._getSvgImage("/static/images/teams/fastrak_promo-vflv_eQ8Z.svg")})):Y(x,{className:e(this.props.className,"multiple-team"),text:X("Create or join a team to collaborate more easily with your coworkers. With teams you get access to a shared team folder, a separate work Dropbox, groups, and other tools and features.","Join one of these teams or create a new one to get new work features and easy access to the team’s files. You can always leave to join another team at any time!",this.state.joinableTeams.length),rightComponent:Y(l.button,{className:"create-team-button",importance:"primary",onClick:this.onCreateTeamClicked,disabled:this.state.confirmingPendingTeamCreation},G("Create free team"))},Y(U,{joinableTeams:this.state.joinableTeams,joinTeamHandler:this.onTeamJoinClicked,cancelJoinTeamHandler:this.onCancelRequestToJoinClicked})):(t=G("Using Dropbox at work?"),Y(x,{className:e(this.props.className,t.length>75?"small-title":void 0,"no-team"),title:t,text:G("Set up a free team, and get new features that help your company work better together."),primaryButtonText:G("Get started"),primaryButtonHandler:this.onNewResendVerificationEmailClicked,primaryButtonDisabled:!1,rightComponent:this._getSvgImage("/static/images/teams/fastrak_promo-vflv_eQ8Z.svg")}))},render:function(){return Y(A,{title:G("Team"),className:"team-promo-page"},this.renderPromoHeader(),Y(f,{columns:[{title:G("Organize company files"),imageSource:H.FILES,text:G("Get a dedicated work Dropbox and team folder—a central place for the files everyone needs."),altText:G("A picture of the new dedicated work dropbox icon.")},{title:G("Protect sensitive data"),imageSource:H.SETTINGS,text:G("Limit access to important files and folders, so company information stays in the right hands."),altText:G("A picture of privacy settings for folders.")},{title:G("Finish projects faster"),imageSource:H.MEMBERS,text:G("Collaborate with coworkers and clients, get feedback, and share your work quickly."),altText:G("A picture of the team members list.")}],dbimgCache:this.props.dbimgCache}))}})})}.call(this),function(){define("modules/clean/teams/team_suggested_member_preview",["external/react","modules/clean/avatar/avatar_with_default","modules/clean/avatar/initials_avatar_with_color","modules/core/i18n","modules/core/user_i18n"],function(e,t,n,r,o){var i,s,a,c,l;return s=r._,a=e.createElement,c=e.DOM,l=e.PropTypes,i=e.createClass({displayName:"TeamSuggestedMemberPreview",propTypes:{label:l.string,contacts:l.arrayOf(l.shape({display_name:l.string.isRequired,avatar_url:l.string}))},getDefaultProps:function(){return{contacts:[]}},_getNamesAsString:function(){var e,t;return e=this.props.contacts.map(function(e){return e.display_name}),t=1===e.length?e[0]:e.slice(0,-1).join(s(", ",{comment:'This comma is the separator for an enumeration of names. The sentence where it will be used looks like this: "Invite all your coworkers, including: Amanda Jones, Sara Simmons, James Kirkwood, and Tim Lon".'}))+s(" and ",{comment:'This is part of an enumeration of names. The sentence where it will be included looks like this: "Invite all your coworkers, including: Amanda Jones, Sara Simmons, James Kirkwood, and Tim Lon".'})+e[e.length-1]},render:function(){var e;return c.div({className:"team-suggested-member-preview"},c.div({className:"team-suggested-member-preview__avatars"},function(){var r,i,s;for(i=this.props.contacts,s=[],r=i.length-1;r>=0;r+=-1)e=i[r],s.push(c.div({className:"team-suggested-member-preview__contact-avatar"},a(t,{dimension:48,photoUrl:e.avatar_url,defaultAvatar:a(n,{dimension:48,name:e.display_name,initials:o.getInitials(e.display_name),shape:"CIRCLE"})})));return s}.call(this)),c.div({className:"team-suggested-member-preview__text"},this.props.label),c.div({className:"team-suggested-member-preview__names"},this._getNamesAsString()))}})})}.call(this),function(){define("modules/constants/teams",[],function(){return window.TeamsConstants})}.call(this);
//# sourceMappingURL=pkg-al.min.js-vflIrJuCA.map